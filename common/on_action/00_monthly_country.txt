# IMP19C Remove ALL vanilla events and on_actions.
monthly_country_pulse = {
	on_actions = {
		#IMP19C CONTENT

		update_government_modifier_on_action

		monthly_reparation_payments_on_action
		
		diplomatic_plays_on_action

		# TODO: Microflavour events
		# delay = { days = { 1 28 } }
		# random_microflavour_event_on_action
	}
	
}

update_government_modifier_on_action = {
	effect = {
		POLITICS_update_government_type_modifier = yes
	}
}

trade_calculation_on_action = {
	effect = {
		# Checks which stage the quarterly trade is in by checking the value of the quarterly_trade_progress var
		# Executes the correct effects
		# Increments quarterly_trade_progress by 1 if under 2.
		# Resets it to 0 if = 2

		# Effects

		# if = 0, then
		# quarterly_trade_pulse
		# quarterly_global_trade_food
		# quarterly_global_trade_luxury
		# += 1

		# if = 1, then
		# quarterly_global_trade_luxury_2
		# quarterly_global_trade_3
		# quarterly_global_trade_4
		# += 1

		# if = 2, then
		# quarterly_global_trade_5
		# quarterly_global_trade_6
		# quarterly_apply_trade_changes_and_consume
		# = 0
	}
}

diplomatic_plays_on_action = {
	effect = {
		if = {
			limit = {
				NOT = {
					has_global_variable = diplomatic_plays_updated_monthly
				}
			}

			DIPLOMACY_update_all_diplomatic_plays = yes

			set_global_variable = {
				name = diplomatic_plays_updated_monthly
				days = 20
			}
		}
	}
}

monthly_reparation_payments_on_action = {
	effect = {
		#Add income for reparations...
		if = {
			limit = { has_variable = paying_5_year_reparations }
			save_scope_as = rep_country
			add_treasury = {
				value = subtract_10_percent_monthly_income
			}
			var:paying_5_year_reparations = {
				add_treasury = {
					value = add_10_percent_monthly_income
				}
			}
		}
	}
}
random_microflavour_event_on_action = {
	random_events = {
		#
	}
}