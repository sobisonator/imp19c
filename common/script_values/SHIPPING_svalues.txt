SHIPPING_total_capacity_TZ = {
	# Scope: Trade center
	# Function: Count the total shipping power in a tradezone
	value = 0
	every_country = {
		limit = {
			any_owned_province = {
				state.governorship.var:trade_center = ROOT	
			}
		}
		every_owned_province = {
			limit = {
				state.governorship.var:trade_center = ROOT		
			}
			#add = SHIPPING_province_power
			add = SHIPPING_province_power		
		}
	}
}

SHIPPING_percentage_in_TZ = {
	# Scope: TZ shipping tracking province, used in piechart_update.1
	# Function: Get the country's percentage of shipping power in a tradezone
	value = var:shipping_power_total
	divide = var:tracking_TZ_shipping_for_TZ.SHIPPING_total_in_TZ
}

SHIPPING_total_in_TZ = {
	# Scope: trade center province
	value = 0
	every_in_list = {
		variable = shipping_power_list
		add = var:shipping_power_total
	}
}

# Province scope

SHIPPING_natural_harbour_bonus = {
	value = 10
}

SHIPPING_trade_chokepoint_bonus = {
	value = 15
}

SHIPPING_major_estuary_bonus = {
	value = 5
}

SHIPPING_port_bonus = {
	value = num_of_port_building
	add = num_of_river_port_building
	multiply = civilization_value
	multiply = 0.1
	if = {
		limit = {
			OR = {
				has_variable = major_estuary
				has_variable = trade_chokepoint
			}
		}
		multiply = 1.5
	}
}

SHIPPING_commerce_district_bonus = {
	value = num_of_URB_commerce_district
}

SHIPPING_railway_bonus = {
	value = num_of_INF_railway_upgrade
}

SHIPPING_depots_ports_river_ports_and_canals_bonus = {
	value = num_of_INF_depot
	add = num_of_port_building
	add = num_of_river_port_building
	add = num_of_INF_canal
	multiply = civilization_value
	multiply = 0.025
}

SHIPPING_depots_ports_river_ports_and_canals_bonus_governorship = {
	every_governorship_state = {
		every_state_province = {
			add = SHIPPING_depots_ports_river_ports_and_canals_bonus
		}
	}
}

SHIPPING_governorship_infrastructure_capacity_bonus = {
	value = 0
	state.governorship = {
		if = {
			limit = {
				TRADE_governorship_infrastructure_capacity_svalue > 0
			}
			add = TRADE_governorship_infrastructure_capacity_svalue
			divide = governorship_num_provinces
		}
	}
	max = num_of_INF_depot
}

governorship_num_provinces = {
	value = 0
	every_governorship_state = {
		every_state_province = {
			add = 1
		}
	}
}

SHIPPING_province_power = {
	# Scope: Province
	# Function: Gets the province's shipping power

	value = 0

	if = {
		limit = {
			has_owner = yes
		}
		#add = SHIPPING_governorship_infrastructure_capacity_bonus # REMOVED: This was too slow to calculate

		add = SHIPPING_port_bonus
		add = SHIPPING_commerce_district_bonus
		add = SHIPPING_railway_bonus
		add = SHIPPING_depots_ports_river_ports_and_canals_bonus

		if = {
			limit = {
				has_variable = natural_harbour
			}
			add = SHIPPING_natural_harbour_bonus
		}
		if = {
			limit = {
				has_variable = trade_chokepoint
			}
			add = SHIPPING_trade_chokepoint_bonus
		}
		if = {
			limit = {
				has_variable = major_estuary
			}
			add = SHIPPING_major_estuary_bonus
		}

		# Unique bonuses

		if = {
			limit = {
				has_variable = suez_canal
			}
			add = 50 # TBD - needs balancing
		}
		if = {
			limit = {
				has_variable = panama_canal
			}
			add = 50 # TBD - needs balancing
		}
		if = {
			limit = {
				has_variable = kiel_canal
			}
			add = 50 # TBD - needs balancing
		}

		if = {
			limit = {
				OR = {
					is_coastal = yes
					has_minor_river = yes
				}
			}
			add = 1
		}

		min = 0
	}

}

SHIPPING_national_expenses = {
	value = 0
	every_governorships = {
		limit = {
			has_variable = governorship_shipping_costs
		}
		add = var:governorship_shipping_costs
	}
}

SHIPPING_earned_all_TZs = {
	value = 0
	add = SHIPPING_earned_from_india
	add = SHIPPING_earned_from_east_north_america
	add = SHIPPING_earned_from_west_north_america
	add = SHIPPING_earned_from_caribbean
	add = SHIPPING_earned_from_west_south_america
	add = SHIPPING_earned_from_east_south_america
	add = SHIPPING_earned_from_south_east_asia
	add = SHIPPING_earned_from_indo_china
	add = SHIPPING_earned_from_yellow_sea
	add = SHIPPING_earned_from_southern_africa
	add = SHIPPING_earned_from_west_africa
	add = SHIPPING_earned_from_east_africa
	add = SHIPPING_earned_from_middle_east
	add = SHIPPING_earned_from_western_steppe
	add = SHIPPING_earned_from_eastern_steppe
	add = SHIPPING_earned_from_upper_yangtzi
	add = SHIPPING_earned_from_atlantic_seaboard
	add = SHIPPING_earned_from_central_europe
	add = SHIPPING_earned_from_west_mediterranean
	add = SHIPPING_earned_from_baltic
	add = SHIPPING_earned_from_east_europe
	add = SHIPPING_earned_from_east_mediterranean
}
SHIPPING_earned_from_india = {
	value = 0
	global_var:global_india_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_east_north_america = {
	value = 0
	global_var:global_east_north_america_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_west_north_america = {
	value = 0
	global_var:global_west_north_america_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_caribbean = {
	value = 0
	global_var:global_caribbean_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_west_south_america = {
	value = 0
	global_var:global_west_south_america_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_east_south_america = {
	value = 0
	global_var:global_east_south_america_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_south_east_asia = {
	value = 0
	global_var:global_south_east_asia_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_indo_china = {
	value = 0
	global_var:global_indo_china_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_yellow_sea = {
	value = 0
	global_var:global_yellow_sea_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_southern_africa = {
	value = 0
	global_var:global_southern_africa_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_west_africa = {
	value = 0
	global_var:global_west_africa_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_east_africa = {
	value = 0
	global_var:global_east_africa_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_middle_east = {
	value = 0
	global_var:global_middle_east_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_western_steppe = {
	value = 0
	global_var:global_western_steppe_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_eastern_steppe = {
	value = 0
	global_var:global_eastern_steppe_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_upper_yangtzi = {
	value = 0
	global_var:global_upper_yangtzi_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_atlantic_seaboard = {
	value = 0
	global_var:global_atlantic_seaboard_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_central_europe = {
	value = 0
	global_var:global_central_europe_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_west_mediterranean = {
	value = 0
	global_var:global_west_mediterranean_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_baltic = {
	value = 0
	global_var:global_baltic_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_east_europe = {
	value = 0
	global_var:global_east_europe_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}
SHIPPING_earned_from_east_mediterranean = {
	value = 0
	global_var:global_east_mediterranean_tradezone = {
		if = {
			limit = {
				any_in_list = {
					variable = shipping_power_list
					var:tracking_TZ_shipping_for_tag = ROOT
				}
			}
			add = var:TZ_this_quarter_transport_pool
			every_in_list = {
				variable = shipping_power_list
				limit = {
					var:tracking_TZ_shipping_for_tag = ROOT
				}
				multiply = SHIPPING_percentage_in_TZ
			}
		}	
	}
}

## TZ penetration values
# Scope: Country

partial_shipping_india = {
	value = var:shipping_india
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_india = {
	value = var:shipping_india
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_east_north_america = {
	value = var:shipping_east_north_america
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_east_north_america = {
	value = var:shipping_east_north_america
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_west_north_america = {
	value = var:shipping_west_north_america
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_west_north_america = {
	value = var:shipping_west_north_america
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_caribbean = {
	value = var:shipping_caribbean
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_caribbean = {
	value = var:shipping_caribbean
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_west_south_america = {
	value = var:shipping_west_south_america
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_west_south_america = {
	value = var:shipping_west_south_america
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_east_south_america = {
	value = var:shipping_east_south_america
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_east_south_america = {
	value = var:shipping_east_south_america
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_south_east_asia = {
	value = var:shipping_south_east_asia
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_south_east_asia = {
	value = var:shipping_south_east_asia
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_indo_china = {
	value = var:shipping_indo_china
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_indo_china = {
	value = var:shipping_indo_china
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_yellow_sea = {
	value = var:shipping_yellow_sea
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_yellow_sea = {
	value = var:shipping_yellow_sea
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_southern_africa = {
	value = var:shipping_southern_africa
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_southern_africa = {
	value = var:shipping_southern_africa
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_west_africa = {
	value = var:shipping_west_africa
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_west_africa = {
	value = var:shipping_west_africa
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_east_africa = {
	value = var:shipping_east_africa
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_east_africa = {
	value = var:shipping_east_africa
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_middle_east = {
	value = var:shipping_middle_east
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_middle_east = {
	value = var:shipping_middle_east
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_western_steppe = {
	value = var:shipping_western_steppe
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_western_steppe = {
	value = var:shipping_western_steppe
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_eastern_steppe = {
	value = var:shipping_eastern_steppe
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_eastern_steppe = {
	value = var:shipping_eastern_steppe
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_upper_yangtzi = {
	value = var:shipping_upper_yangtzi
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_upper_yangtzi = {
	value = var:shipping_upper_yangtzi
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_atlantic_seaboard = {
	value = var:shipping_atlantic_seaboard
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_atlantic_seaboard = {
	value = var:shipping_atlantic_seaboard
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_central_europe = {
	value = var:shipping_central_europe
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_central_europe = {
	value = var:shipping_central_europe
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_west_mediterranean = {
	value = var:shipping_west_mediterranean
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_west_mediterranean = {
	value = var:shipping_west_mediterranean
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_baltic = {
	value = var:shipping_baltic
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_baltic = {
	value = var:shipping_baltic
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_east_europe = {
	value = var:shipping_east_europe
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_east_europe = {
	value = var:shipping_east_europe
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}
partial_shipping_east_mediterranean = {
	value = var:shipping_east_mediterranean
	multiply = 0.85 # TODO: This should be based on trade laws of the country
}

minimal_shipping_east_mediterranean = {
	value = var:shipping_east_mediterranean
	multiply = 0.75 # TODO: This should be based on trade laws of the country
}

TZ_penetration_india = {
	value = var:shipping_india

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_india > 0
			}
			add = var:shipping_india
			every_subject = {
				limit = {
					var:shipping_india > 0
				}
				add = THIS.partial_shipping_india
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_india > 0
			}
			add = var:shipping_india
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_india > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_india
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_india
		}
	}
	add = 0.0001
	divide = global_var:global_india_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_east_north_america = {
	value = var:shipping_east_north_america

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_east_north_america > 0
			}
			add = var:shipping_east_north_america
			every_subject = {
				limit = {
					var:shipping_east_north_america > 0
				}
				add = THIS.partial_shipping_east_north_america
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_east_north_america > 0
			}
			add = var:shipping_east_north_america
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_east_north_america > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_east_north_america
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_east_north_america
		}
	}
	add = 0.0001
	divide = global_var:global_east_north_america_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_west_north_america = {
	value = var:shipping_west_north_america

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_west_north_america > 0
			}
			add = var:shipping_west_north_america
			every_subject = {
				limit = {
					var:shipping_west_north_america > 0
				}
				add = THIS.partial_shipping_west_north_america
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_west_north_america > 0
			}
			add = var:shipping_west_north_america
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_west_north_america > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_west_north_america
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_west_north_america
		}
	}
	add = 0.0001
	divide = global_var:global_west_north_america_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_caribbean = {
	value = var:shipping_caribbean

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_caribbean > 0
			}
			add = var:shipping_caribbean
			every_subject = {
				limit = {
					var:shipping_caribbean > 0
				}
				add = THIS.partial_shipping_caribbean
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_caribbean > 0
			}
			add = var:shipping_caribbean
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_caribbean > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_caribbean
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_caribbean
		}
	}
	add = 0.0001
	divide = global_var:global_caribbean_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_west_south_america = {
	value = var:shipping_west_south_america

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_west_south_america > 0
			}
			add = var:shipping_west_south_america
			every_subject = {
				limit = {
					var:shipping_west_south_america > 0
				}
				add = THIS.partial_shipping_west_south_america
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_west_south_america > 0
			}
			add = var:shipping_west_south_america
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_west_south_america > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_west_south_america
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_west_south_america
		}
	}
	add = 0.0001
	divide = global_var:global_west_south_america_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_east_south_america = {
	value = var:shipping_east_south_america

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_east_south_america > 0
			}
			add = var:shipping_east_south_america
			every_subject = {
				limit = {
					var:shipping_east_south_america > 0
				}
				add = THIS.partial_shipping_east_south_america
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_east_south_america > 0
			}
			add = var:shipping_east_south_america
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_east_south_america > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_east_south_america
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_east_south_america
		}
	}
	add = 0.0001
	divide = global_var:global_east_south_america_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_south_east_asia = {
	value = var:shipping_south_east_asia

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_south_east_asia > 0
			}
			add = var:shipping_south_east_asia
			every_subject = {
				limit = {
					var:shipping_south_east_asia > 0
				}
				add = THIS.partial_shipping_south_east_asia
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_south_east_asia > 0
			}
			add = var:shipping_south_east_asia
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_south_east_asia > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_south_east_asia
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_south_east_asia
		}
	}
	add = 0.0001
	divide = global_var:global_south_east_asia_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_indo_china = {
	value = var:shipping_indo_china

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_indo_china > 0
			}
			add = var:shipping_indo_china
			every_subject = {
				limit = {
					var:shipping_indo_china > 0
				}
				add = THIS.partial_shipping_indo_china
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_indo_china > 0
			}
			add = var:shipping_indo_china
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_indo_china > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_indo_china
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_indo_china
		}
	}
	add = 0.0001
	divide = global_var:global_indo_china_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_yellow_sea = {
	value = var:shipping_yellow_sea

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_yellow_sea > 0
			}
			add = var:shipping_yellow_sea
			every_subject = {
				limit = {
					var:shipping_yellow_sea > 0
				}
				add = THIS.partial_shipping_yellow_sea
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_yellow_sea > 0
			}
			add = var:shipping_yellow_sea
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_yellow_sea > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_yellow_sea
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_yellow_sea
		}
	}
	add = 0.0001
	divide = global_var:global_yellow_sea_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_southern_africa = {
	value = var:shipping_southern_africa

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_southern_africa > 0
			}
			add = var:shipping_southern_africa
			every_subject = {
				limit = {
					var:shipping_southern_africa > 0
				}
				add = THIS.partial_shipping_southern_africa
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_southern_africa > 0
			}
			add = var:shipping_southern_africa
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_southern_africa > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_southern_africa
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_southern_africa
		}
	}
	add = 0.0001
	divide = global_var:global_southern_africa_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_west_africa = {
	value = var:shipping_west_africa

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_west_africa > 0
			}
			add = var:shipping_west_africa
			every_subject = {
				limit = {
					var:shipping_west_africa > 0
				}
				add = THIS.partial_shipping_west_africa
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_west_africa > 0
			}
			add = var:shipping_west_africa
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_west_africa > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_west_africa
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_west_africa
		}
	}
	add = 0.0001
	divide = global_var:global_west_africa_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_east_africa = {
	value = var:shipping_east_africa

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_east_africa > 0
			}
			add = var:shipping_east_africa
			every_subject = {
				limit = {
					var:shipping_east_africa > 0
				}
				add = THIS.partial_shipping_east_africa
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_east_africa > 0
			}
			add = var:shipping_east_africa
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_east_africa > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_east_africa
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_east_africa
		}
	}
	add = 0.0001
	divide = global_var:global_east_africa_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_middle_east = {
	value = var:shipping_middle_east

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_middle_east > 0
			}
			add = var:shipping_middle_east
			every_subject = {
				limit = {
					var:shipping_middle_east > 0
				}
				add = THIS.partial_shipping_middle_east
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_middle_east > 0
			}
			add = var:shipping_middle_east
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_middle_east > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_middle_east
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_middle_east
		}
	}
	add = 0.0001
	divide = global_var:global_middle_east_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_western_steppe = {
	value = var:shipping_western_steppe

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_western_steppe > 0
			}
			add = var:shipping_western_steppe
			every_subject = {
				limit = {
					var:shipping_western_steppe > 0
				}
				add = THIS.partial_shipping_western_steppe
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_western_steppe > 0
			}
			add = var:shipping_western_steppe
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_western_steppe > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_western_steppe
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_western_steppe
		}
	}
	add = 0.0001
	divide = global_var:global_western_steppe_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_eastern_steppe = {
	value = var:shipping_eastern_steppe

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_eastern_steppe > 0
			}
			add = var:shipping_eastern_steppe
			every_subject = {
				limit = {
					var:shipping_eastern_steppe > 0
				}
				add = THIS.partial_shipping_eastern_steppe
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_eastern_steppe > 0
			}
			add = var:shipping_eastern_steppe
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_eastern_steppe > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_eastern_steppe
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_eastern_steppe
		}
	}
	add = 0.0001
	divide = global_var:global_eastern_steppe_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_upper_yangtzi = {
	value = var:shipping_upper_yangtzi

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_upper_yangtzi > 0
			}
			add = var:shipping_upper_yangtzi
			every_subject = {
				limit = {
					var:shipping_upper_yangtzi > 0
				}
				add = THIS.partial_shipping_upper_yangtzi
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_upper_yangtzi > 0
			}
			add = var:shipping_upper_yangtzi
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_upper_yangtzi > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_upper_yangtzi
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_upper_yangtzi
		}
	}
	add = 0.0001
	divide = global_var:global_upper_yangtzi_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_atlantic_seaboard = {
	value = var:shipping_atlantic_seaboard

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_atlantic_seaboard > 0
			}
			add = var:shipping_atlantic_seaboard
			every_subject = {
				limit = {
					var:shipping_atlantic_seaboard > 0
				}
				add = THIS.partial_shipping_atlantic_seaboard
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_atlantic_seaboard > 0
			}
			add = var:shipping_atlantic_seaboard
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_atlantic_seaboard > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_atlantic_seaboard
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_atlantic_seaboard
		}
	}
	add = 0.0001
	divide = global_var:global_atlantic_seaboard_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_central_europe = {
	value = var:shipping_central_europe

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_central_europe > 0
			}
			add = var:shipping_central_europe
			every_subject = {
				limit = {
					var:shipping_central_europe > 0
				}
				add = THIS.partial_shipping_central_europe
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_central_europe > 0
			}
			add = var:shipping_central_europe
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_central_europe > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_central_europe
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_central_europe
		}
	}
	add = 0.0001
	divide = global_var:global_central_europe_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_west_mediterranean = {
	value = var:shipping_west_mediterranean

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_west_mediterranean > 0
			}
			add = var:shipping_west_mediterranean
			every_subject = {
				limit = {
					var:shipping_west_mediterranean > 0
				}
				add = THIS.partial_shipping_west_mediterranean
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_west_mediterranean > 0
			}
			add = var:shipping_west_mediterranean
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_west_mediterranean > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_west_mediterranean
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_west_mediterranean
		}
	}
	add = 0.0001
	divide = global_var:global_west_mediterranean_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_baltic = {
	value = var:shipping_baltic

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_baltic > 0
			}
			add = var:shipping_baltic
			every_subject = {
				limit = {
					var:shipping_baltic > 0
				}
				add = THIS.partial_shipping_baltic
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_baltic > 0
			}
			add = var:shipping_baltic
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_baltic > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_baltic
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_baltic
		}
	}
	add = 0.0001
	divide = global_var:global_baltic_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_east_europe = {
	value = var:shipping_east_europe

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				var:shipping_east_europe > 0
			}
			add = var:shipping_east_europe
			every_subject = {
				limit = {
					var:shipping_east_europe > 0
				}
				add = THIS.partial_shipping_east_europe
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				var:shipping_east_europe > 0
			}
			add = var:shipping_east_europe
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			var:shipping_east_europe > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_east_europe
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_east_europe
		}
	}
	add = 0.0001
	divide = global_var:global_east_europe_tradezone.SHIPPING_total_in_TZ
}
TZ_penetration_east_mediterranean = {
	value = var:shipping_east_mediterranean

	every_subject = {
		if = {
			limit = {
				OR = {
					is_subject_type = client_colony
					is_subject_type = autonomous_colony
				}
				THIS.var:shipping_east_mediterranean > 0
			}
			add = THIS.var:shipping_east_mediterranean
			every_subject = {
				limit = {
					THIS.var:shipping_east_mediterranean > 0
				}
				add = THIS.partial_shipping_east_mediterranean
			}
		}
	else_if = {
			limit = {
				has_variable = overlord_customs_union
				THIS.var:shipping_east_mediterranean > 0
			}
			add = THIS.var:shipping_east_mediterranean
		}
	}

	every_in_list = {
		variable = list_of_trade_partners_all_categories
		limit = {
			THIS.var:shipping_east_mediterranean > 0
			NOT = {
				is_subject_of = PREV
			}
		}
		add = THIS.minimal_shipping_east_mediterranean
	}

if = {
		limit = {
			has_variable = member_of_federation
		}
		var:member_of_federation = {
			# TODO: Have this get the shipping value of the governorships in the federation only
			# se_SHIPPING should do this by saving the total shipping of a customs union in the federation scope
		}
	}

	if = {
		limit = {
			is_subject = yes
		}
		overlord = {
			add = THIS.var:shipping_east_mediterranean
		}
	}
	add = 0.0001
	divide = global_var:global_east_mediterranean_tradezone.SHIPPING_total_in_TZ
}

SHIPPING_global_TZ_penetration_bonus = {
	# Scope: Country
	# Bonus from 0-1 which gives TZ penetration to every tradezone
	value = 0
}