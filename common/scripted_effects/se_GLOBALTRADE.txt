GT_do_global_trade = {
	set_global_variable = global_trade_triggered
	GT_reset_global_TZ_variables = yes
	SHIPPING_update_TZ_overview_piecharts = yes
	GT_update_governorship_vars = yes
	GT_cache_TZ_penetration_values = yes
	GT_reset_all_TZ_stockpiles = yes
	every_country = {
		every_governorships = {
			GT_cache_governorship_infrastructure_capacity = yes
			GT_declare_sell_to_TZ_aggregate_stockpile = yes
		}
	}
	every_country = {
		every_governorships = {
			GT_get_governorship_percentage_of_TZ_sell_stockpile_all = yes
		}
	}
	GT_sum_all_TZ_stockpiles = yes
	every_country = {
		GT_get_country_global_market_penetration_all = yes
		every_governorships = {
			GT_create_order_all = yes
		}
	}
}

GT_create_tradegroups = {
	# Scope: Random country, to every trade center province
	# Function: Create temporary objects that are used as proxies for groups of governorships within countries 
}

GT_reset_global_TZ_variables = {
	# Scope: Random country
	# Function: Specifies the list of global variables to reset for each tradezone
	every_tradegood_complex = {
		APPLY = GT_reset_global_TZ_variables_tradegood
	}
}

GT_reset_global_TZ_variables_tradegood = {
	# Scope: Random country
	# Function: Set $tradegood$ stockpile to 0 for every tradezone
	set_global_variable = {
		name = india_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_north_america_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = west_north_america_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = caribbean_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = west_south_america_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_south_america_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = south_east_asia_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = indo_china_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = yellow_sea_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = southern_africa_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = west_africa_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_africa_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = middle_east_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = western_steppe_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = eastern_steppe_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = upper_yangtzi_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = atlantic_seaboard_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = central_europe_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = west_mediterranean_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = baltic_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_europe_stockpile_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_mediterranean_stockpile_$tradegood$
		value = 0
	}

	set_global_variable = {
		name = india_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_north_america_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = west_north_america_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = caribbean_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = west_south_america_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_south_america_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = south_east_asia_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = indo_china_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = yellow_sea_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = southern_africa_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = west_africa_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_africa_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = middle_east_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = western_steppe_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = eastern_steppe_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = upper_yangtzi_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = atlantic_seaboard_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = central_europe_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = west_mediterranean_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = baltic_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_europe_total_order_size_$tradegood$
		value = 0
	}
	set_global_variable = {
		name = east_mediterranean_total_order_size_$tradegood$
		value = 0
	}
}

GT_update_governorship_vars = {
	# Scope: Random country
	# Function: Set the trade center variable in every governorship
	every_country = {
		every_governorships = {
			TRADE_governorship_get_pops_this_quarter = yes
			TRADE_set_internal_trade_scope = yes
			TRADE_update_governorship_TZs = yes
		}
	}
}

GT_reset_all_TZ_stockpiles = {
	every_trade_center = {
		every_tradegood_complex = {
			APPLY = GT_set_tradegood_TZ_stockpile_0
		}
	}
}

GT_set_tradegood_TZ_stockpile_0 = {
	set_variable = {
		name = TZ_stockpile_$tradegood$
		value = 0
	}
}

GT_cache_governorship_infrastructure_capacity = {
	# Scope: Governorship
	# Function: Cache the governorship infrastructure capacity as a var
	set_variable = {
		name = governorship_infrastructure_capacity
		value = TRADE_governorship_infrastructure_capacity_svalue
	}
}

GT_declare_sell_to_TZ_aggregate_stockpile = {
	# Scope: Governorship
	# Function: Every governorship declares its stockpile surplus of every tradegood as available to sell to its local tradezone, and some of it to the "global" tradezone
	save_scope_as = seller_governorship

	every_tradegood_complex = {
		APPLY = GT_declare_sell_amount
	}
	every_tradegood_complex = {
		APPLY = GT_update_TZ_sell_amount
	}
}

GT_declare_sell_amount = {
	# Scope: Governorship
	if = {
		limit = {
			var:$tradegood$_stockpile > DEMAND_$tradegood$
		}
		set_variable = {
			name = for_sale_$tradegood$
			value = var:$tradegood$_stockpile
		}
		change_variable = {
			name = for_sale_$tradegood$
			subtract = DEMAND_$tradegood$
		}
		# Cap at governorship infra capacity
		set_local_variable = {
			name = l_governorship_infrastructure_capacity_compare
			value = var:governorship_infrastructure_capacity
		}
		change_local_variable = {
			name = l_governorship_infrastructure_capacity_compare
			subtract = var:for_sale_$tradegood$
		}
		if = {
			limit = {
				trigger_if = {
					limit = {
						has_local_variable = l_governorship_infrastructure_capacity_compare
					}
					local_var:l_governorship_infrastructure_capacity_compare < 0
				}
			}
			set_variable = {
				name = for_sale_$tradegood$
				value = var:governorship_infrastructure_capacity
			}
		}
	}
}

GT_update_TZ_sell_amount = {
	# Scope: Governorship
	# Function: Update the amount of $tradegood$ offered in the TZ to which the governorship belongs
	if = {
		limit = {
			has_variable = for_sale_$tradegood$
		}
		switch = {
			trigger = has_variable
			TZ_is_india_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = india
					tradegood = $tradegood$
				}
			}
			TZ_is_east_north_america_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = east_north_america
					tradegood = $tradegood$
				}
			}
			TZ_is_west_north_america_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = west_north_america
					tradegood = $tradegood$
				}
			}
			TZ_is_caribbean_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = caribbean
					tradegood = $tradegood$
				}
			}
			TZ_is_west_south_america_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = west_south_america
					tradegood = $tradegood$
				}
			}
			TZ_is_east_south_america_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = east_south_america
					tradegood = $tradegood$
				}
			}
			TZ_is_south_east_asia_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = south_east_asia
					tradegood = $tradegood$
				}
			}
			TZ_is_indo_china_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = indo_china
					tradegood = $tradegood$
				}
			}
			TZ_is_yellow_sea_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = yellow_sea
					tradegood = $tradegood$
				}
			}
			TZ_is_southern_africa_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = southern_africa
					tradegood = $tradegood$
				}
			}
			TZ_is_west_africa_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = west_africa
					tradegood = $tradegood$
				}
			}
			TZ_is_east_africa_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = east_africa
					tradegood = $tradegood$
				}
			}
			TZ_is_middle_east_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = middle_east
					tradegood = $tradegood$
				}
			}
			TZ_is_western_steppe_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = western_steppe
					tradegood = $tradegood$
				}
			}
			TZ_is_eastern_steppe_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = eastern_steppe
					tradegood = $tradegood$
				}
			}
			TZ_is_upper_yangtzi_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = upper_yangtzi
					tradegood = $tradegood$
				}
			}
			TZ_is_atlantic_seaboard_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = atlantic_seaboard
					tradegood = $tradegood$
				}
			}
			TZ_is_central_europe_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = central_europe
					tradegood = $tradegood$
				}
			}
			TZ_is_west_mediterranean_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = west_mediterranean
					tradegood = $tradegood$
				}
			}
			TZ_is_baltic_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = baltic
					tradegood = $tradegood$
				}
			}
			TZ_is_east_europe_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = east_europe
					tradegood = $tradegood$
				}
			}
			TZ_is_east_mediterranean_tradezone = {
				GT_update_TZ_sell_amount_apply_change = {
					tradezone = east_mediterranean
					tradegood = $tradegood$
				}
			}
		}
	}
}

GT_update_TZ_sell_amount_apply_change = {
	# Scope: Governorship
	# Function: Apply the change to the appropriate global variable for the selling governorship's TZ
	change_global_variable = {
		name = $tradezone$_stockpile_$tradegood$
		add = var:for_sale_$tradegood$
	}
}

GT_cache_TZ_penetration_values = {
	every_country = {
		set_variable = {
			name = TZ_penetration_india
			value = TZ_penetration_india
		}
		set_variable = {
			name = TZ_penetration_east_north_america
			value = TZ_penetration_east_north_america
		}
		set_variable = {
			name = TZ_penetration_west_north_america
			value = TZ_penetration_west_north_america
		}
		set_variable = {
			name = TZ_penetration_caribbean
			value = TZ_penetration_caribbean
		}
		set_variable = {
			name = TZ_penetration_west_south_america
			value = TZ_penetration_west_south_america
		}
		set_variable = {
			name = TZ_penetration_east_south_america
			value = TZ_penetration_east_south_america
		}
		set_variable = {
			name = TZ_penetration_south_east_asia
			value = TZ_penetration_south_east_asia
		}
		set_variable = {
			name = TZ_penetration_indo_china
			value = TZ_penetration_indo_china
		}
		set_variable = {
			name = TZ_penetration_yellow_sea
			value = TZ_penetration_yellow_sea
		}
		set_variable = {
			name = TZ_penetration_southern_africa
			value = TZ_penetration_southern_africa
		}
		set_variable = {
			name = TZ_penetration_west_africa
			value = TZ_penetration_west_africa
		}
		set_variable = {
			name = TZ_penetration_east_africa
			value = TZ_penetration_east_africa
		}
		set_variable = {
			name = TZ_penetration_middle_east
			value = TZ_penetration_middle_east
		}
		set_variable = {
			name = TZ_penetration_western_steppe
			value = TZ_penetration_western_steppe
		}
		set_variable = {
			name = TZ_penetration_eastern_steppe
			value = TZ_penetration_eastern_steppe
		}
		set_variable = {
			name = TZ_penetration_upper_yangtzi
			value = TZ_penetration_upper_yangtzi
		}
		set_variable = {
			name = TZ_penetration_atlantic_seaboard
			value = TZ_penetration_atlantic_seaboard
		}
		set_variable = {
			name = TZ_penetration_central_europe
			value = TZ_penetration_central_europe
		}
		set_variable = {
			name = TZ_penetration_west_mediterranean
			value = TZ_penetration_west_mediterranean
		}
		set_variable = {
			name = TZ_penetration_baltic
			value = TZ_penetration_baltic
		}
		set_variable = {
			name = TZ_penetration_east_europe
			value = TZ_penetration_east_europe
		}
		set_variable = {
			name = TZ_penetration_east_mediterranean
			value = TZ_penetration_east_mediterranean
		}
	}
}

GT_get_governorship_percentage_of_TZ_sell_stockpile_all = {
	# Scope: Governorship
	# Function: Run GT_get_governorship_percentage_of_TZ_sell_stockpile for every tradegood
	every_tradegood_complex = {
		APPLY = GT_get_governorship_percentage_of_TZ_sell_stockpile
	}
}

GT_get_governorship_percentage_of_TZ_sell_stockpile = {
	# Scope: Governorship
	# Function: Calculate what percentage of the TZ's $tradegood$ stockpile this governorship's sell declare for $tradegood$ was
	if = {
		limit = {
			has_variable = for_sale_$tradegood$
		}
		set_variable = {
			name = percentage_of_TZ_sell_stockpile_$tradegood$
			value = var:for_sale_$tradegood$
		}
		switch = {
			trigger = has_variable
			TZ_is_india_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:india_stockpile_$tradegood$
					}
				}
			}
			TZ_is_east_north_america_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:east_north_america_stockpile_$tradegood$
					}
				}
			}
			TZ_is_west_north_america_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:west_north_america_stockpile_$tradegood$
					}
				}
			}
			TZ_is_caribbean_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:caribbean_stockpile_$tradegood$
					}
				}
			}
			TZ_is_west_south_america_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:west_south_america_stockpile_$tradegood$
					}
				}
			}
			TZ_is_east_south_america_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:east_south_america_stockpile_$tradegood$
					}
				}
			}
			TZ_is_south_east_asia_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:south_east_asia_stockpile_$tradegood$
					}
				}
			}
			TZ_is_indo_china_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:indo_china_stockpile_$tradegood$
					}
				}
			}
			TZ_is_yellow_sea_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:yellow_sea_stockpile_$tradegood$
					}
				}
			}
			TZ_is_southern_africa_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:southern_africa_stockpile_$tradegood$
					}
				}
			}
			TZ_is_west_africa_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:west_africa_stockpile_$tradegood$
					}
				}
			}
			TZ_is_east_africa_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:east_africa_stockpile_$tradegood$
					}
				}
			}
			TZ_is_middle_east_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:middle_east_stockpile_$tradegood$
					}
				}
			}
			TZ_is_western_steppe_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:western_steppe_stockpile_$tradegood$
					}
				}
			}
			TZ_is_eastern_steppe_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:eastern_steppe_stockpile_$tradegood$
					}
				}
			}
			TZ_is_upper_yangtzi_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:upper_yangtzi_stockpile_$tradegood$
					}
				}
			}
			TZ_is_atlantic_seaboard_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:atlantic_seaboard_stockpile_$tradegood$
					}
				}
			}
			TZ_is_central_europe_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:central_europe_stockpile_$tradegood$
					}
				}
			}
			TZ_is_west_mediterranean_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:west_mediterranean_stockpile_$tradegood$
					}
				}
			}
			TZ_is_baltic_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:baltic_stockpile_$tradegood$
					}
				}
			}
			TZ_is_east_europe_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:east_europe_stockpile_$tradegood$
					}
				}
			}
			TZ_is_east_mediterranean_tradezone = {
				if = {
					limit = {
						var:percentage_of_TZ_sell_stockpile_$tradegood$ > 0
					}
					change_variable = {
						name = percentage_of_TZ_sell_stockpile_$tradegood$
						divide = global_var:east_mediterranean_stockpile_$tradegood$
					}
				}
			}
		}
	}
	else = {
		set_variable = {
			name = percentage_of_TZ_sell_stockpile_$tradegood$
			value = 0
		}		
	}
}

GT_sum_all_TZ_stockpiles = {
	# Scope: Random country
	# Function: Create one big pool of available tradegoods out of all the tradegood stockpiles
	every_tradegood_complex = {
		APPLY = GT_create_global_stockpile
	}
}

GT_create_global_stockpile = {
	# Scope: Random country
	# Function: Create a global stockpile of $tradegood$ out of all the TZ stockpiles
	set_global_variable = {
		name = global_stockpile_$tradegood$
		value = global_var:india_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:east_north_america_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:west_north_america_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:caribbean_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:west_south_america_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:east_south_america_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:south_east_asia_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:indo_china_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:yellow_sea_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:southern_africa_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:west_africa_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:east_africa_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:middle_east_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:western_steppe_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:eastern_steppe_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:upper_yangtzi_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:atlantic_seaboard_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:central_europe_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:west_mediterranean_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:baltic_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:east_europe_stockpile_$tradegood$
	}
	change_global_variable = {
		name = global_stockpile_$tradegood$
		add = global_var:east_mediterranean_stockpile_$tradegood$
	}

	# And get percentages
	set_global_variable = {
		name = india_percentage_of_global_stockpile_$tradegood$
		value = global_var:india_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:india_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = india_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = east_north_america_percentage_of_global_stockpile_$tradegood$
		value = global_var:east_north_america_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:east_north_america_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = east_north_america_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = west_north_america_percentage_of_global_stockpile_$tradegood$
		value = global_var:west_north_america_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:west_north_america_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = west_north_america_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = caribbean_percentage_of_global_stockpile_$tradegood$
		value = global_var:caribbean_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:caribbean_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = caribbean_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = west_south_america_percentage_of_global_stockpile_$tradegood$
		value = global_var:west_south_america_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:west_south_america_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = west_south_america_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = east_south_america_percentage_of_global_stockpile_$tradegood$
		value = global_var:east_south_america_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:east_south_america_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = east_south_america_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = south_east_asia_percentage_of_global_stockpile_$tradegood$
		value = global_var:south_east_asia_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:south_east_asia_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = south_east_asia_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = indo_china_percentage_of_global_stockpile_$tradegood$
		value = global_var:indo_china_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:indo_china_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = indo_china_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = yellow_sea_percentage_of_global_stockpile_$tradegood$
		value = global_var:yellow_sea_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:yellow_sea_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = yellow_sea_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = southern_africa_percentage_of_global_stockpile_$tradegood$
		value = global_var:southern_africa_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:southern_africa_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = southern_africa_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = west_africa_percentage_of_global_stockpile_$tradegood$
		value = global_var:west_africa_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:west_africa_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = west_africa_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = east_africa_percentage_of_global_stockpile_$tradegood$
		value = global_var:east_africa_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:east_africa_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = east_africa_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = middle_east_percentage_of_global_stockpile_$tradegood$
		value = global_var:middle_east_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:middle_east_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = middle_east_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = western_steppe_percentage_of_global_stockpile_$tradegood$
		value = global_var:western_steppe_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:western_steppe_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = western_steppe_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = eastern_steppe_percentage_of_global_stockpile_$tradegood$
		value = global_var:eastern_steppe_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:eastern_steppe_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = eastern_steppe_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = upper_yangtzi_percentage_of_global_stockpile_$tradegood$
		value = global_var:upper_yangtzi_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:upper_yangtzi_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = upper_yangtzi_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = atlantic_seaboard_percentage_of_global_stockpile_$tradegood$
		value = global_var:atlantic_seaboard_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:atlantic_seaboard_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = atlantic_seaboard_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = central_europe_percentage_of_global_stockpile_$tradegood$
		value = global_var:central_europe_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:central_europe_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = central_europe_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = west_mediterranean_percentage_of_global_stockpile_$tradegood$
		value = global_var:west_mediterranean_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:west_mediterranean_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = west_mediterranean_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = baltic_percentage_of_global_stockpile_$tradegood$
		value = global_var:baltic_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:baltic_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = baltic_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = east_europe_percentage_of_global_stockpile_$tradegood$
		value = global_var:east_europe_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:east_europe_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = east_europe_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
	set_global_variable = {
		name = east_mediterranean_percentage_of_global_stockpile_$tradegood$
		value = global_var:east_mediterranean_stockpile_$tradegood$
	}
	if = {
		limit = {
			global_var:east_mediterranean_stockpile_$tradegood$ > 0
			global_var:global_stockpile_$tradegood$ > 0
		}
		change_global_variable = {
			name = east_mediterranean_percentage_of_global_stockpile_$tradegood$
			divide = global_var:global_stockpile_$tradegood$
		}
	}
}

GT_get_country_global_market_penetration_all = {
	every_tradegood_complex = {
		APPLY = GT_get_country_global_market_penetration_tradegood
	}
}

GT_get_country_global_market_penetration_tradegood = {
	# Scope: Country
	# Function: Get the penetration of the global market as a factor of the market penetration of all TZs contributing to the global stockpile for $tradegood$
	set_local_variable = {
		name = from_india_country_global_market_penetration_$tradegood$
		value = global_var:india_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_india_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_india
	}
	set_local_variable = {
		name = from_east_north_america_country_global_market_penetration_$tradegood$
		value = global_var:east_north_america_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_east_north_america_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_east_north_america
	}
	set_local_variable = {
		name = from_west_north_america_country_global_market_penetration_$tradegood$
		value = global_var:west_north_america_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_west_north_america_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_west_north_america
	}
	set_local_variable = {
		name = from_caribbean_country_global_market_penetration_$tradegood$
		value = global_var:caribbean_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_caribbean_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_caribbean
	}
	set_local_variable = {
		name = from_west_south_america_country_global_market_penetration_$tradegood$
		value = global_var:west_south_america_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_west_south_america_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_west_south_america
	}
	set_local_variable = {
		name = from_east_south_america_country_global_market_penetration_$tradegood$
		value = global_var:east_south_america_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_east_south_america_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_east_south_america
	}
	set_local_variable = {
		name = from_south_east_asia_country_global_market_penetration_$tradegood$
		value = global_var:south_east_asia_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_south_east_asia_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_south_east_asia
	}
	set_local_variable = {
		name = from_indo_china_country_global_market_penetration_$tradegood$
		value = global_var:indo_china_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_indo_china_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_indo_china
	}
	set_local_variable = {
		name = from_yellow_sea_country_global_market_penetration_$tradegood$
		value = global_var:yellow_sea_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_yellow_sea_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_yellow_sea
	}
	set_local_variable = {
		name = from_southern_africa_country_global_market_penetration_$tradegood$
		value = global_var:southern_africa_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_southern_africa_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_southern_africa
	}
	set_local_variable = {
		name = from_west_africa_country_global_market_penetration_$tradegood$
		value = global_var:west_africa_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_west_africa_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_west_africa
	}
	set_local_variable = {
		name = from_east_africa_country_global_market_penetration_$tradegood$
		value = global_var:east_africa_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_east_africa_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_east_africa
	}
	set_local_variable = {
		name = from_middle_east_country_global_market_penetration_$tradegood$
		value = global_var:middle_east_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_middle_east_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_middle_east
	}
	set_local_variable = {
		name = from_western_steppe_country_global_market_penetration_$tradegood$
		value = global_var:western_steppe_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_western_steppe_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_western_steppe
	}
	set_local_variable = {
		name = from_eastern_steppe_country_global_market_penetration_$tradegood$
		value = global_var:eastern_steppe_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_eastern_steppe_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_eastern_steppe
	}
	set_local_variable = {
		name = from_upper_yangtzi_country_global_market_penetration_$tradegood$
		value = global_var:upper_yangtzi_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_upper_yangtzi_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_upper_yangtzi
	}
	set_local_variable = {
		name = from_atlantic_seaboard_country_global_market_penetration_$tradegood$
		value = global_var:atlantic_seaboard_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_atlantic_seaboard_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_atlantic_seaboard
	}
	set_local_variable = {
		name = from_central_europe_country_global_market_penetration_$tradegood$
		value = global_var:central_europe_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_central_europe_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_central_europe
	}
	set_local_variable = {
		name = from_west_mediterranean_country_global_market_penetration_$tradegood$
		value = global_var:west_mediterranean_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_west_mediterranean_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_west_mediterranean
	}
	set_local_variable = {
		name = from_baltic_country_global_market_penetration_$tradegood$
		value = global_var:baltic_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_baltic_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_baltic
	}
	set_local_variable = {
		name = from_east_europe_country_global_market_penetration_$tradegood$
		value = global_var:east_europe_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_east_europe_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_east_europe
	}
	set_local_variable = {
		name = from_east_mediterranean_country_global_market_penetration_$tradegood$
		value = global_var:east_mediterranean_percentage_of_global_stockpile_$tradegood$
	}
	change_local_variable = {
		name = from_east_mediterranean_country_global_market_penetration_$tradegood$
		multiply = var:TZ_penetration_east_mediterranean
	}

	# Sum up all the contributions
	set_variable = {
		name = country_global_market_penetration_$tradegood$
		value = local_var:from_india_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_east_north_america_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_west_north_america_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_caribbean_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_west_south_america_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_east_south_america_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_south_east_asia_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_indo_china_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_yellow_sea_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_southern_africa_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_west_africa_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_east_africa_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_middle_east_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_western_steppe_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_eastern_steppe_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_upper_yangtzi_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_atlantic_seaboard_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_central_europe_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_west_mediterranean_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_baltic_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_east_europe_country_global_market_penetration_$tradegood$
	}
	change_variable = {
		name = country_global_market_penetration_$tradegood$
		add = local_var:from_east_mediterranean_country_global_market_penetration_$tradegood$
	}

	# Divide by 22, the number of tradezones

	change_variable = {
		name = country_global_market_penetration_$tradegood$
		multiply = 0.4545
	}
}

GT_get_country_unit_price_tradegood = {
	# Scope: Country
	# Function: Get the unit price of $tradegood$ in a country scope based on the TZ penetration
	if = {
		limit = {
			var:TZ_penetration_india > 0
		}
		set_local_variable = {
			name = from_india_country_unit_price_$tradegood$
			value = global_var:global_india_tradezone.var:local_price_$tradegood$
		}
		change_local_variable = {
			name = from_india_country_unit_price_$tradegood$
			multiply = var:TZ_penetration_india
		}
	}
}

GT_create_order_all = {
	# Scope: Governorship
	# Function: Create orders for all tradegoods which are then communicated to the TZ
	every_tradegood_complex = {
		APPLY = GT_create_order_tradegood
	}
}

GT_create_order_tradegood = {
	# Scope: Governorship
	# Function: Get the order for $tradegood$ from the governorship and submit it to the tradezone global order pool
	if = {
		limit = {
			var:$tradegood$_stockpile < DEMAND_$tradegood$
		}
		set_variable = {
			name = order_size_$tradegood$
			value = DEMAND_$tradegood$
		}
		change_variable = {
			name = order_size_$tradegood$
			subtract = var:$tradegood$_stockpile
		}
		switch = {
			trigger = has_variable
			TZ_is_india_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = india
					tradegood = $tradegood$
				}
			}
			TZ_is_east_north_america_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = east_north_america
					tradegood = $tradegood$
				}
			}
			TZ_is_west_north_america_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = west_north_america
					tradegood = $tradegood$
				}
			}
			TZ_is_caribbean_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = caribbean
					tradegood = $tradegood$
				}
			}
			TZ_is_west_south_america_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = west_south_america
					tradegood = $tradegood$
				}
			}
			TZ_is_east_south_america_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = east_south_america
					tradegood = $tradegood$
				}
			}
			TZ_is_south_east_asia_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = south_east_asia
					tradegood = $tradegood$
				}
			}
			TZ_is_indo_china_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = indo_china
					tradegood = $tradegood$
				}
			}
			TZ_is_yellow_sea_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = yellow_sea
					tradegood = $tradegood$
				}
			}
			TZ_is_southern_africa_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = southern_africa
					tradegood = $tradegood$
				}
			}
			TZ_is_west_africa_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = west_africa
					tradegood = $tradegood$
				}
			}
			TZ_is_east_africa_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = east_africa
					tradegood = $tradegood$
				}
			}
			TZ_is_middle_east_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = middle_east
					tradegood = $tradegood$
				}
			}
			TZ_is_western_steppe_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = western_steppe
					tradegood = $tradegood$
				}
			}
			TZ_is_eastern_steppe_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = eastern_steppe
					tradegood = $tradegood$
				}
			}
			TZ_is_upper_yangtzi_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = upper_yangtzi
					tradegood = $tradegood$
				}
			}
			TZ_is_atlantic_seaboard_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = atlantic_seaboard
					tradegood = $tradegood$
				}
			}
			TZ_is_central_europe_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = central_europe
					tradegood = $tradegood$
				}
			}
			TZ_is_west_mediterranean_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = west_mediterranean
					tradegood = $tradegood$
				}
			}
			TZ_is_baltic_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = baltic
					tradegood = $tradegood$
				}
			}
			TZ_is_east_europe_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = east_europe
					tradegood = $tradegood$
				}
			}
			TZ_is_east_mediterranean_tradezone = {
				GT_update_TZ_order_amount_apply_change = {
					tradezone = east_mediterranean
					tradegood = $tradegood$
				}
			}
		}
	}
}

GT_update_TZ_order_amount_apply_change = {
	change_global_variable = {
		name = $tradezone$_total_order_size_$tradegood$
		add = var:order_size_$tradegood$
	}
}