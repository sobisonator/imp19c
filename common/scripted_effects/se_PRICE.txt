PRICE_set_tradegood_price_deviation_from_mean_absolute = {
	set_variable = {
		name = 
	}
}

PRICE_set_food_mean_price = {
	
}

PRICE_set_food_mean_absolute_deviation = {
	
}

PRICE_set_food_mean_price_normalised = {
	# Scope: governorship
	# Ignore prices outside of the MAD for average price calculation
	if = {
		limit = {
			NOT = { has_global_variable = first_time_price_setup_food_done }
		}
		set_variable = {
			name = food_mean_price_normalised
			value = 1
	}
	if = {
		limit = { 
			var:DEMAND_price_grain_deviation_from_mean_absolute < var:DEMAND_food_price_MAD
		}
		change_variable = {
			name = food_mean_price_normalised
			add = var:price_grain
		}
	}
	if = {
		limit = { 
			var:DEMAND_price_fish_deviation_from_mean_absolute < var:DEMAND_food_price_MAD
		}
		change_variable = {
			name = food_mean_price_normalised
			add = var:price_fish
		}
	}
	if = {
		limit = { 
			var:DEMAND_price_livestock_deviation_from_mean_absolute < var:DEMAND_food_price_MAD
		}
		change_variable = {
			name = food_mean_price_normalised
			add = var:price_livestock
		}
	}
	if = {
		limit = { 
			var:DEMAND_price_mediterranean_fruit_deviation_from_mean_absolute < var:DEMAND_food_price_MAD
		}
		change_variable = {
			name = food_mean_price_normalised
			add = var:price_mediterranean_fruit
		}
	}
	if = {
		limit = { 
			var:DEMAND_price_temperate_fruit_deviation_from_mean_absolute < var:DEMAND_food_price_MAD
		}
		change_variable = {
			name = food_mean_price_normalised
			add = var:price_temperate_fruit
		}
	}
	if = {
		limit = { 
			var:DEMAND_price_tropical_fruit_deviation_from_mean_absolute < var:DEMAND_food_price_MAD
		}
		change_variable = {
			name = food_mean_price_normalised
			add = var:price_tropical_fruit
		}
	}
	if = {
		limit = { 
			var:DEMAND_price_vegetables_deviation_from_mean_absolute < var:DEMAND_food_price_MAD
		}
		change_variable = {
			name = food_mean_price_normalised
			add = var:price_vegetables
		}
	}
	if = {
		limit = { 
			var:DEMAND_price_processed_foods_deviation_from_mean_absolute < var:DEMAND_food_price_MAD
		}
		change_variable = {
			name = food_mean_price_normalised
			add = var:price_processed_foods
		}
	}
	divide = DEMAND_num_food_tradegoods
	FUNC_bound_variable = {
		variable = food_mean_price_normalised
		max = NONE
		max_type = ''
		min = 0.0001
		min_type = ''
	}
}