namespace = timetest_quarterly_tick

timetest_quarterly_tick.1 = { # Part 1 - Send to reserves
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			every_governorships = {
				limit = {
					NOT = {
						has_variable = internal_trade_scope
					}
				}
				CURRENCY_governorship_send_to_reserves = yes
			}
		}
	}
}

timetest_quarterly_tick.2 = { # Part 2 - Set internal trade scope
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			every_governorships = {
				limit = {
					NOT = {
						has_variable = internal_trade_scope
					}
				}
				TRADE_set_internal_trade_scope = yes
			}
		}
	}
}

timetest_quarterly_tick.3 = { # Part 3 - Update governorship TZs
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			every_governorships = {
				limit = {
					NOT = {
						has_variable = internal_trade_scope
					}
				}
				TRADE_update_governorship_TZs = yes
			}
		}
	}
}

timetest_quarterly_tick.4 = { # Part 4 - Get pops this quarter
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			every_governorships = {
				TRADE_governorship_get_pops_this_quarter = yes
			}
		}
	}
}

timetest_quarterly_tick.5 = { # Part 5 - Produce all goods
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			every_governorships = {
				GOODS_governorship_produce_all = yes
			}
		}
	}
}

timetest_quarterly_tick.6 = { # Part 6 - Cottage industry production
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			every_governorships = {
				COTTAGEIND_produce_all = yes
			}
		}
	}
}

timetest_quarterly_tick.7 = { # Part 7 - Apply inflation wealth malus
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			CURRENCY_apply_inflation_wealth_malus_country = yes
		}
	}
}

timetest_quarterly_tick.8 = { # Part 8 - Generate new wealth
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		WEALTH_generate_new_all_countries = yes
	}
}

timetest_quarterly_tick.9 = { # Part 9 - Pay wages
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		WEALTH_pay_wages_all_countries = yes
	}
}

timetest_quarterly_tick.10 = { # Part 10 - Cache currency power
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_province = {
			limit = {
				has_variable = currency_name
			}
			CURRENCY_cache_power = yes
		}
	}
}

timetest_quarterly_tick.11 = { # Part 11 - Cache currency power trade bonus
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_province = {
			limit = {
				has_variable = currency_name
			}
			CURRENCY_cache_power_trade_bonus = yes
		}
	}
}

timetest_quarterly_tick.12 = { # Part 12 - Collect all taxes
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			INCOME_collect_all_taxes_country = yes
		}
	}
}

timetest_quarterly_tick.13 = { # Part 13 - Update treasury
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			INCOME_update_treasury_country = yes
		}
	}
}

timetest_quarterly_tick.14 = { # Part 14 - Cache national wealth
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			WEALTH_cache_national_wealth = yes
		}
	}
}

timetest_quarterly_tick.15 = { # Part 15 - Update military supplies
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			MILITARY_update_supplies = yes
		}
	}
}

timetest_quarterly_tick.16 = { # Part 16 - Calculate military procurement wealth
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		every_country = {
			INCOME_calculate_and_distribute_military_procurement_wealth_owed = yes
		}
	}
}

timetest_quarterly_tick.17 = { # Part 17 - Update global power status
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		DIPLOMACY_update_global_power_status = yes
	}
}

timetest_quarterly_tick.18 = { # Part 18 - Update AI diplomatic plays
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {
		AI_update_all_diplomatic_plays = yes
	}
}

timetest_quarterly_tick.19 = { # Part 17a - update global power status
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {

		every_country = {
			every_tradezone_complex = {
				APPLY = DIPLOMACY_cache_country_power_tradezone
			}
		}

	}
}

timetest_quarterly_tick.20 = { # Part 17b - update global power status
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {

		every_country = {
			every_tradezone_complex = {
				APPLY = DIPLOMACY_add_cached_subject_power_tradezone
			}
		}

	}
}

timetest_quarterly_tick.21 = { # Part 17c - update global power status
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {

		every_country = {
			every_tradezone_complex = {
				APPLY = DIPLOMACY_finalise_cached_subject_power_tradezone
			}
		}

	}
}

timetest_quarterly_tick.22 = { # Part 17d - update global power status
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {

		every_tradezone_complex = {
			APPLY = DIPLOMACY_get_power_in_play_TZ
		}

	}
}

timetest_quarterly_tick.22 = { # Part 17d - update global power status
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {

		every_tradezone_complex = {
			APPLY = DIPLOMACY_get_top_players_tradezone
		}

	}
}

timetest_quarterly_tick.23 = { # Part 17d - update global power status
	type = country_event
	title = "TEST"
	desc = "TEST"
	picture = aqueducts
	hidden = yes

	trigger = {
		NOT = { has_global_variable = done_quarterly_trade }
	}

	immediate = {

		DIPLOMACY_get_top_global_powers = yes

	}
}