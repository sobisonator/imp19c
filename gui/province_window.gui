@window_margin_left = 15
@window_margin_right = 15
@window_margin_bottom = 6
@window_margin_left_title = 13

@province_window_animation_length = 0.15 
@stats_icon_width = 96

template cultural_province_ranks_guts
{
	size = { 210 92 }
	modify_texture = {
		name = "Alpha"
		texture = "gfx/interface/base_parts/background_x60bd_alpha.dds"
		blend_mode = alphamultiply
		spriteType = Corneredtiled
		spriteborder = { 60 60 }
	}					
	using = tooltip_above					
	tooltipwidget = {
		province_rank_tooltip_base = {
			datacontext = "[ProvinceWindow.GetProvince.GetRank]"
		}
	}
}
template province_has_eastern_culture
{
	visible = "[Or( Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'vietic' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'japanese_group' ) ),Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'chinese_group' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'koreanic' ) ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'tai' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'burmic' ) ) )]"
}

template province_has_arab_culture
{
	visible = "[Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'levantine_arabic' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'african_arabic' ) ),Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'berber' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'eastern_arabic' ) ) )]"
}

template province_has_mediterranean_culture
{
	visible = "[Or( Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'spanish' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'italian' ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'greek' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'west_turkic' ) ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'south_slavic' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'albanian_group' ) ) ) ]"
}

template province_has_india_culture
{
	visible = "[Or( Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'central_aryan' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'western_aryan' ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'southern_aryan' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'telegu' ) ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'dravidian' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'eastern_aryan' ) ) ) ]"	
}

template province_has_latino_culture
{
	visible = "[Or( Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'south_latino' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'andean' ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'afro_latino' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'north_latino' ) ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'nahua_group' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'mesoamerican_group' ) ) ) ]"	
}

template province_has_sahel_culture
{
	visible = "[Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'hausa_group' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'malinese' ) ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'mande_group' ) )]"
}

template cultural_province_ranks
{
	container = {
		visible = "[EqualTo_string( ProvinceWindow.GetProvince.GetRank.GetKey, 'settlement' )]"
		position = { 30 93 }
		#scissor = yes
		icon = {
			texture = "gfx/interface/icons/province_rank/settlement.dds"
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/asian_rural.dds"
			using = province_has_eastern_culture
			using = cultural_province_ranks_guts	
		}
		
		icon = {
			texture = "gfx/interface/icons/province_rank/arab_rural.dds"
			using = province_has_arab_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/mediterranean_rural.dds"
			using = province_has_mediterranean_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/india_rural.dds"
			using = province_has_india_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/latino_rural.dds"
			using = province_has_latino_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/sahel_rural.dds"
			using = province_has_sahel_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			visible = "[Or( Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'tanoan' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'navaho' ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'na-dene' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'algic' ) ) ), Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'yuman' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'penutian' ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'keres' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'patagonian' ) ) ) ) ]"
			texture = "gfx/interface/icons/province_rank/native_rural.dds"
			using = cultural_province_ranks_guts	
		}
		icon = {
			visible = "[Or( Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'je_group' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'tupi-guarani' ) ), Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'warao_group' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'chibcha' ) ) ),  EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'maya' ) ) ]"
			texture = "gfx/interface/icons/province_rank/amazonian_rural.dds"
			using = cultural_province_ranks_guts	
		}
		icon = {
			visible = "[Or( Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'sudanese' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'abyssinian' ) ),Or( EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'east_cushitic' ), EqualTo_string( ProvinceWindow.GetProvince.GetDominantCulture.GetCultureGroup.GetKey, 'south_nilotic' ) ) )]"
			texture = "gfx/interface/icons/province_rank/horn_rural.dds"
			using = cultural_province_ranks_guts	
		}
	}
	container = {
		visible = "[EqualTo_string( ProvinceWindow.GetProvince.GetRank.GetKey, 'city' )]"
		position = { 30 93 }
		icon = {
			texture = "gfx/interface/icons/province_rank/city.dds"
			using = cultural_province_ranks_guts	
		}
		icon = {								
			texture = "gfx/interface/icons/province_rank/asian_city.dds"
			using = province_has_eastern_culture
			using = cultural_province_ranks_guts	
		}
		icon = {								
			texture = "gfx/interface/icons/province_rank/arab_city.dds"
			using = province_has_arab_culture
			using = cultural_province_ranks_guts	
		}
		icon = {								
			texture = "gfx/interface/icons/province_rank/mediterranean_city.dds"
			using = province_has_mediterranean_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/india_city.dds"
			using = province_has_india_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/latino_city.dds"
			using = province_has_latino_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/sahel_city.dds"
			using = province_has_sahel_culture
			using = cultural_province_ranks_guts	
		}
	}
	container = {
		visible = "[EqualTo_string( ProvinceWindow.GetProvince.GetRank.GetKey, 'city_metropolis' )]"
		position = { 30 93 }
		icon = {
			texture = "gfx/interface/icons/province_rank/city_metropolis.dds"
			using = cultural_province_ranks_guts
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/asian_metropolis.dds"
			using = province_has_eastern_culture
			using = cultural_province_ranks_guts
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/arab_metropolis.dds"
			using = province_has_arab_culture
			using = cultural_province_ranks_guts
		}
		icon = {								
			texture = "gfx/interface/icons/province_rank/mediterranean_metropolis.dds"
			using = province_has_mediterranean_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/india_metropolis.dds"
			using = province_has_india_culture
			using = cultural_province_ranks_guts	
		}
		icon = {
			texture = "gfx/interface/icons/province_rank/latino_metropolis.dds"
			using = province_has_latino_culture
			using = cultural_province_ranks_guts	
		}
	}
}

window = {
	name = "province_window"
	position = { 60 0 }
	parentanchor = bottom|left
	layer = middle
	allow_outside = yes
	
	@window_width = 766
	
	size = { @window_width 374 }
	
	visible = "[ProvinceWindow.HasProvince]"
	
	state = {
		name = _show
		#on_start = "[GetVariableSystem.Set( 'city_change_window', 'dont_show_city_change' )]"
		on_start = "[GetVariableSystem.Set( 'show_governorship', 'yes' )]"
		on_start = "[GetVariableSystem.Set( 'show_province_rank', 'no' )]"
		start_sound = {
			soundeffect = "event:/SFX/UI/Generic/2.0/sfx_ui_window_tab_close"
		}
	}
	state = { 
		name = _hide
		start_sound = {
			soundeffect = "event:/SFX/UI/Generic/2.0/sfx_ui_window_tab_close"
		}
	}
	
	sharp_base_window = {
		name = "state_details"
		movable = no
		visible = "[ProvinceWindow.HasState]" # Consider changing this to allow for colonisation view
		
		@state_height_large = 300
		@state_height_small = 56
		size = { @window_width @state_height_large } #TODO
		
		parentanchor = bottom
		position = { 0 -484 }
		
		state = {
			name = enlargen_state_details
			animation = {
				size = { @window_width @state_height_large }
			}
			
			duration = @province_window_animation_length
			
			on_finish = "[PdxGuiWidget.FindChild('state_contents_ani').TriggerAnimation('create_children')]"
			on_finish = "[PdxGuiWidget.FindChild('background_gradient').Show]"
		}
		
		state = {
			name = ensmallen_state_details
			animation = {
				size = { @window_width @state_height_small }
			}
			
			duration = @province_window_animation_length
			
			on_start = "[PdxGuiWidget.FindChild('state_contents_ani').TriggerAnimation('hide_children')]"
			on_start = "[PdxGuiWidget.FindChild('background_gradient').Hide]"
			
		}	
		vbox = {
			name = "state_main_box"
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding
			
			hbox = {
				name = "top_row"
				layoutpolicy_horizontal = expanding
				using = MainWindowHeaderBoxState
				
				blockoverride "ShowButton"
				{

					onclick = "[PdxGuiTriggerAllAnimations('enlargen_state_details')]"
					onclick = "[PdxGuiTriggerAllAnimations('show_button_2')]"
					onclick = "[PdxGuiWidget.Hide]"
					onclick = "[GetVariableSystem.Toggle('state_up')]"
					clicksound = "event:/SFX/UI/Generic/2.0/sfx_ui_window_queued_events_open"
				
					state = {
						name = show_button_1
						on_start = "[PdxGuiWidget.Show]"
					} 
					state = {
						name = hide_button_1
						on_start = "[PdxGuiWidget.Hide]"
					} 

					state = {
						name = code_trigger_show_state
						on_start = "[PdxGuiTriggerAllAnimations('enlargen_state_details')]"
						on_start = "[PdxGuiTriggerAllAnimations('show_button_2')]"
						on_start = "[PdxGuiWidget.Hide]"
					}  
				}
				
				blockoverride "HideButton"
				{
					onclick = "[PdxGuiTriggerAllAnimations('ensmallen_state_details')]"
					onclick = "[PdxGuiTriggerAllAnimations('show_button_1')]"
					onclick = "[PdxGuiWidget.Hide]"
					onclick = "[GetVariableSystem.Toggle('state_up')]"
					
					state = {
						name = hide_button_2
						on_start = "[PdxGuiWidget.Hide]"
					}
					
					state = { 
						name = show_button_2
						on_start = "[PdxGuiWidget.Show]"
						start_sound = {
							soundeffect = "event:/SFX/UI/Generic/2.0/sfx_ui_window_queued_events_close"
						}
					}
				}
				
				blockoverride "FlagOrIcon"
				{
					widget = {
						visible = "[ProvinceWindow.GetProvince.HasOwner]"
						size = { 40 40 }
						maximumsize = { 40 40 }
						country_flag_reworked = {
							blockoverride "Size"
							{
								parentanchor = vcenter
								size = { 60 60 }
							}
							blockoverride "Flag"
							{ 
								texture = "[ProvinceWindow.GetProvince.GetOwner.AccessCoatOfArms.GetTexture('(int32)120', '(int32)120')]"
								frame = "[ProvinceWindow.GetProvince.GetOwner.AccessCoatOfArms.GetFrame('(int32)120', '(int32)120'))]"
								framesize = { 120 120 }
							}
							blockoverride "On_click"
							{
								onclick = "[ProvinceWindow.OpenDiplomacy]"
							}
						}
					}
					
					widget = {
						name = "spacing_hack"
						size = { 50 1 }
						visible = "[ProvinceWindow.GetProvince.HasOwner]"
					}
					
				}
				
				blockoverride "Title_text"
				{
					text = "[ProvinceWindow.GetState.GetName]"  
					margin_left = @window_margin_left_title
				}
				blockoverride "Max_text_width" 
				{
					max_width = 600
				}
				blockoverride "White_buttons"
				{

					white_button_round = {
						size = { 26 26 }
						visible = "[GetVariableSystem.Exists('state_up')]"
						blockoverride "Icon" { texture = "gfx/interface/base_parts/up_arrow.dds" }
						blockoverride "On_click"
						{
							onclick = "[PdxGuiTriggerAllAnimations('enlargen_state_details')]"
							onclick = "[PdxGuiTriggerAllAnimations('show_button_2')]"
							onclick = "[PdxGuiTriggerAllAnimations('hide_button_1')]"
							onclick = "[GetVariableSystem.Toggle('state_up')]"
							clicksound = "event:/SFX/UI/Generic/2.0/sfx_ui_window_queued_events_open"
						}
						state = {
							name = show_button_1
							on_start = "[PdxGuiWidget.Show]"
						} 

						state = {
							name = code_trigger_show_state
							on_start = "[PdxGuiTriggerAllAnimations('enlargen_state_details')]"
							on_start = "[PdxGuiTriggerAllAnimations('show_button_2')]"
							on_start = "[PdxGuiWidget.Hide]"
						}
					}
					
					white_button_round = {
						size = { 26 26 }
						blockoverride "Icon" { texture = "gfx/interface/base_parts/down_arrow.dds" }
						visible = "[Not( GetVariableSystem.Exists('state_up') )]"
						blockoverride "On_click"
						{
							onclick = "[PdxGuiTriggerAllAnimations('ensmallen_state_details')]"
							onclick = "[PdxGuiTriggerAllAnimations('show_button_1')]"
							onclick = "[PdxGuiTriggerAllAnimations('hide_button_2')]"
							onclick = "[GetVariableSystem.Toggle('state_up')]"
						}
					
						state = { 
							name = show_button_2
							on_start = "[PdxGuiWidget.Show]"
							start_sound = {
								soundeffect = "event:/SFX/UI/Generic/2.0/sfx_ui_window_queued_events_close"
							}
						}
					
					}
				
					button_close = {
						onclick = "[ProvinceWindow.OnClose]"
						tooltip = "CLOSE"
					}
				}
			}
			vbox = {
				name = "state_contents_ani"
				alpha = 1
				layoutpolicy_vertical = expanding
				layoutpolicy_horizontal = expanding
				state = {
					name = create_children
					
					animation = {
						alpha = 1
					}
					
					duration = 0.1
					
				}
				
				state = {
					name = hide_children
					
					animation = {
						alpha = 0
					}
					
				}
				hbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					margin = { 8 0 }
					visible = "[GetVariableSystem.HasValue( 'show_governorship', 'no' )]"
					margin_widget = {
						size = { 124 163 }
						using = NoninteractableBG
						blockoverride "Margins"
						{ 
							margin_left = 12
							margin_right = 12
							margin_bottom = 0
						}

						cpt_button = {
							parentanchor = vcenter
							name = "governor_portrait"
							blockoverride "Size" { size = { 80 126 } }
							blockoverride "Context" { datacontext = "[ProvinceWindow.GetState.GetGovernorOrRuler]" }
							margin_bottom = 2
							blockoverride "portrait_button_template_tooltip" 
							{ 
								tooltip = "[ProvinceWindow.GetState.GetGovernorOrRuler.GetTooltip]"
							} 
						}
						flowcontainer = {
							ignoreinvisible = yes
							spacing = 4
							parentanchor = right|vcenter
							position = { -1 -3 }
							direction = vertical
							icon_button_square = {
								visible = "[ProvinceWindow.IsPlayerProvince]"
								layoutpolicy_horizontal = fixed
								tooltip = "#T Show Governorship#!"
								blockoverride "On_click"
								{
									onclick = "[GetVariableSystem.Set( 'show_governorship', 'yes' )]"
									clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_sub_tab"
									oversound = "event:/SFX/UI/Generic/sfx_ui_generic_mouse_over"
								} 
								
								blockoverride "Icon"
								{
									texture = "gfx/interface/icons/shared_icons/province.dds"
									size = { 90% 90% }
								}
									
								size = { 40 40 }
							}								
							
							icon_button_square = {
								layoutpolicy_horizontal = fixed
								enabled = "[ProvinceWindow.CanChangePolicy]"
								tooltip = "[GetChangeGovernorPoliciesTooltip(ProvinceWindow.GetState)]"
								blockoverride "On_click"
								{
									onclick = "[ProvinceWindow.ChangePolicy]"
									clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_sub_tab"
									oversound = "event:/SFX/UI/Generic/sfx_ui_generic_mouse_over"
								} 
							
								blockoverride "Icon"
								{
									texture = "[GetGovernorPolicyIcon(ProvinceWindow.GetState.GetGovernorPolicy)]"
									size = { 90% 90% }
								}
								
								size = { 40 40 }
								
							}
							icon_button_square = {
								size = { 40 40 }
								visible = "[Not( ProvinceWindow.IsPlayerProvince )]" 
								
								blockoverride "On_click"
								{
									clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_sub_tab"
									oversound = "event:/SFX/UI/Generic/sfx_ui_generic_mouse_over"
									inherit_visual_state = no
									enabled = no
								}
								blockoverride "Icon"
								{
									texture = "gfx/interface/icons/shared_icons/change.dds"
									#color = { 0.12 0.12 0.12 1 }
									size = { 34 34 }
								}
								
								tooltip = "CANNOT_CHANGE_GOV_HERE"
							} 
							icon_button_square = {
								size = { 40 40 }
								visible = "[ProvinceWindow.IsPlayerProvince]" 
								
								
								blockoverride "On_click"
								{
									onclick = "[ProvinceWindow.ChangeGovernor]"
									clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_sub_tab"
									oversound = "event:/SFX/UI/Generic/sfx_ui_generic_mouse_over"
									inherit_visual_state = no
								}
								blockoverride "Icon"
								{
									texture = "gfx/interface/icons/shared_icons/change.dds"
									size = { 34 34 }
								}
								
								enabled = "[ProvinceWindow.CanChangeGovernor]"
								tooltip = "[ProvinceWindow.GetChangeGovernorTooltip]"
							}  
						}
					}
					
					margin_widget = {
						size = { 54 0 }
						layoutpolicy_vertical = expanding
						margin_top = 10
						flowcontainer = {
							direction = vertical
							spacing = 2
							position = { 0 0 }
							parentanchor = right
							icon_pie = {
								size = { 46 46 }
								datamodel = "[ProvinceWindow.GetPopCultures]"
								
								###Slices and Icon
								blockoverride "SliceTooltip" { tooltip = "POP_CULTURE_SLICE_TT" }
								blockoverride "SliceValue" { value = "[PopCultureItem.GetSize]" } 
								blockoverride "SliceColor" { color = "[PopCultureItem.GetColor]" }
								blockoverride "Icon" { 
									using = icon_culture
									position = { 0 1 }
									tooltip = "POPCULTUREPIECHART"
									scale = 1.1
								}
								
								button = {
									name = "percenter" 
									size = { 100% 100% }
									alpha = 0.1
									icon = {
										texture = "gfx/interface/base_parts/round_button_frame_26_shadow.dds"
										size = { 100% 100% }
										alpha = 0.6
									}
									widget = {
										size = { 37 30 }
										datacontext = "[ProvinceWindow.GetState]"
										tooltip = "STATE_INTEGRATED_CULTURE_TT"
										parentanchor = hcenter
										position = { 0 3 }
										textbox = { 
											text = "[GuiScope.SetRoot( ProvinceWindow.GetState.MakeScope ).ScriptValue('state_culture_integrated_percent_svalue')|0%]"
											autoresize = yes
											using = BaseFontS
											fontsize = 16
											parentanchor = hcenter|vcenter
											position = { 0 4 }
										}
										
									}
									state = {
										name = _mouse_hierarchy_enter
										animation = {
											alpha = 1
										}
										duration = 0.15
									}
									
									state = {
										name = _mouse_hierarchy_leave
										animation = {
											alpha = 0.1
										}
										duration = 0.15
									}
								}
							}
							
							icon_pie = {
								size = { 46 46 }
								datamodel = "[ProvinceWindow.GetPopReligions]"
								
								###Slices and Icon
								blockoverride "SliceTooltip" { tooltip = "POP_RELIGION_SLICE_TT" }  
								blockoverride "SliceValue" { value = "[PopReligionItem.GetSize]" }
								blockoverride "SliceColor" { color = "[PopReligionItem.GetColor]" }
								blockoverride "Icon" { 
									using = icon_religious
									position = { 0 1 }
									tooltip = "POPRELIGIONPIECHART"
									scale = 1.1
								}
								button = {
									name = "percenterreligion"
									size = { 100% 100% }
									alpha = 0.1
									icon = {
										texture = "gfx/interface/base_parts/round_button_frame_26_shadow.dds"
										size = { 100% 100% }
										alpha = 0.6
									}
									widget = {
										size = { 37 30 }
										datacontext = "[ProvinceWindow.GetState]"
										tooltip = "STATE_RELIGION_TT"
										parentanchor = hcenter
										position = { 0 3 }
										textbox = { 
											text = "[GuiScope.SetRoot( ProvinceWindow.GetState.MakeScope ).ScriptValue('state_religion_integrated_percent_svalue')|0%]"
											autoresize = yes
											using = BaseFontS
											fontsize = 16
											parentanchor = hcenter|vcenter
											position = { 0 4 }
										}
										
									}
									state = {
										name = _mouse_hierarchy_enter
										animation = {
											alpha = 1
										}
										duration = 0.15
									}
									
									state = {
										name = _mouse_hierarchy_leave
										animation = {
											alpha = 0.1
										}
										duration = 0.15
									}
								}
							}
							
							icon_pie = {
								size = { 46 46 }
								datamodel = "[ProvinceWindow.GetPopTypes]"
								
								###Slices and Icon
								blockoverride "SliceTooltip" { tooltip = "[PopTypeItem.GetName]" }
								blockoverride "SliceValue" { value = "[PopTypeItem.GetSize]" }
								blockoverride "SliceColor" { color = "[PopTypeItem.GetColor]" }
								blockoverride "Icon" { 
									using = icon_poptype
									position = { 0 -1 }
									tooltip = "POPTYPEPIECHART"
									scale = 1.1
								}
							}
						}
					}
					
					margin_widget = {
						size = { 162 0 }
						layoutpolicy_vertical = expanding
						margin_top = 8
						flowcontainer = {
							direction = vertical
							spacing = 0
							
							icon_and_text_progress = {
								parentanchor = hcenter
								tooltip = "[ProvinceWindow.GetState.GetFoodTooltip][ProvinceWindow.GetState.GetFoodModifierEffect]"
								blockoverride "TotalSize" { size = { 164 38 } }
								blockoverride "size" { size = { 152 7 } } # -10px width than above makes it align
								blockoverride "LineVisibility"
								{
									visible = no 
								}
								
								blockoverride "Icon"
								{
									texture = "gfx/interface/icons/shared_icons/food.dds"
								}
								
								blockoverride "Text"
								{
									text = "[ProvinceWindow.GetState.GetFood|0]/[ProvinceWindow.GetState.GetFoodCapacity|0]"
									tooltip = "[ProvinceWindow.GetState.GetFoodCapacityTooltip]"
								}
								
								blockoverride "Value"
								{
									value = "[FixedPointToFloat(ProvinceWindow.GetState.GetFoodCapacityPercent)]"
								}
						
								blockoverride "UpIndicator" { visible = "[GreaterThan_int32( ProvinceWindow.GetState.GetFoodFrame, '(int32)3' )]" }
								blockoverride "DownIndicator" { visible = "[LessThan_int32( ProvinceWindow.GetState.GetFoodFrame, '(int32)3' )]" }
								
							}
							
							icon_and_text_progress = { 
								parentanchor = hcenter
								tooltip = "[ProvinceWindow.GetState.GetLoyaltyTooltip]"
								blockoverride "TotalSize" { size = { 164 38 } }
								blockoverride "size" { size = { 152 7 } }  # -12px width than above makes it align
								blockoverride "LineVisibility"
								{
									visible = no 
								}

								blockoverride "Icon"
								{
									texture = "gfx/interface/icons/shared_icons/loyalty.dds"
								}
								
								blockoverride "Text"
								{
									text = "[ProvinceWindow.GetState.GetStateLoyalty|0]/100"
								}
								
								blockoverride "Value"
								{
									value = "[FixedPointToFloat(ProvinceWindow.GetState.GetStateLoyalty)]"
								}
								blockoverride "UpIndicator" { visible = "[GreaterThan_int32( ProvinceWindow.GetState.GetMonthlyLoyaltyFrame, '(int32)3' )]" }
								blockoverride "DownIndicator" { visible = "[LessThan_int32( ProvinceWindow.GetState.GetMonthlyLoyaltyFrame, '(int32)3' )]" }
							}
						}
						
						container = {
							position = { 3 -26 }
							parentanchor = bottom|hcenter
							
							flowcontainer = {
								name = "state_building_buttons"
								@icon_button_size = 37
								@icon_size = 32
								direction = horizontal
								spacing = 3
								ignoreinvisible = yes
								visible = "[ProvinceWindow.IsPlayerProvince]"

							}
						}
						fixed_size_progressbar = {
							parentanchor = bottom|hcenter
							position = { 0 -12 }
							visible = "[And(ProvinceWindow.GetState.HasTimedModifier('state_modification_in_progress'), ProvinceWindow.IsPlayerProvince)]"
							tooltip = "[ProvinceWindow.GetState.GetTimedModifier('state_modification_in_progress').GetTooltip]"
							size = { 160 8 }
							blockoverride "Value"
							{
								value = "[FixedPointToFloat(ProvinceWindow.GetState.GetTimedModifier('state_modification_in_progress').GetProgress)]"
							}
							using = tooltip_se
						}
					}
					
					margin_widget = {
						size = { 378 0 }
						layoutpolicy_vertical = expanding
						using = NoninteractableBG
						blockoverride "Margins"
						{
							margin_top = 0
							margin_bottom = 0
							margin_left = 0
							margin_right = 13
						}
						
						overlappingitembox = { 
							parentanchor = right
							margin = { 0 8 }
							#size = { 254 54 }
							size = { 364 54 }
							name = "tradegoods_grid_row_1"
							datamodel = "[ProvinceWindow.GetFirstSurplus]"
							#list_entry = { size = { 100% 100% } }
							item = {
								trade_good_entry = {
									tooltip = "[TradeGoodSurplusItem.GetItem.GetSurplus.GetInfo]"
									using = tooltip_ne
									alwaystransparent = no
									filter_mouse = all
									blockoverride "Icon" { texture = "[GetTradeGoodsIcon(TradeGoodSurplusItem.GetItem.GetSurplus.GetTradeGoods)]" }
									blockoverride "Text" { text = "[TradeGoodSurplusItem.GetItem.GetSurplus.GetAmount]" }
									blockoverride "On_click" 
									{
										onclick = "[SelectImportDestination(TradeGoodSurplusItem.GetItem.GetSurplus)]"
										enabled = "[TradeGoodSurplusItem.GetItem.CanBeAvailableForTrade]"
									}
								}
							}
						}

						overlappingitembox = {
							parentanchor = right
							name = "tradegoods_grid_row_2"
							size = { 364 54 }
							margin = { 0 8 }
							position = { 0 54 }
							datamodel = "[ProvinceWindow.GetSecondSurplus]"
							item = {
								trade_good_entry = {
									tooltip = "[TradeGoodSurplusItem.GetItem.GetSurplus.GetInfo]"
									using = tooltip_se
									alwaystransparent = no
									filter_mouse = all
									
									blockoverride "Icon" { texture = "[GetTradeGoodsIcon(TradeGoodSurplusItem.GetItem.GetSurplus.GetTradeGoods)]" }
									blockoverride "Text" { text = "[TradeGoodSurplusItem.GetItem.GetSurplus.GetAmount]" }
									blockoverride "On_click" 
									{
										onclick = "[SelectImportDestination(TradeGoodSurplusItem.GetItem.GetSurplus)]"
										enabled = "[TradeGoodSurplusItem.GetItem.CanBeAvailableForTrade]"
									}
								}
							}
						}
						
						flowcontainer = {
							parentanchor = bottom|left
							position = { 6 -8 }
							spacing = 3
							ignoreinvisible = yes
							icon_and_text = {
								size = { 98 38 }
								parentanchor = vcenter
								blockoverride "Icon"
								{
									texture = "gfx/interface/icons/shared_icons/income.dds"
									size = { 32 32 }
								}
								blockoverride "Text"
								{
									text = "[ProvinceWindow.GetState.GetTotalIncome|2=]"
								}
								tooltipwidget = { 
									using = double_piece_tooltip 	
									blockoverride "LeftText" { text = "[ProvinceWindow.GetState.GetCurrentTaxIncomeInfo]" }
									blockoverride "RightText" { text = "[ProvinceWindow.GetState.GetCurrentCommerceIncomeInfo]" }
								}
							}
							icon_and_text = {
								size = { 108 38 }
								blockoverride "Icon" 
								{ 
									texture = "gfx/interface/icons/modifiers/local_base_trade_routes.dds" 
									size = { 30 30 }
								}
								
								blockoverride "Text"
								{
									text = "[ProvinceWindow.GetState.GetTradeRoutesShort]"
								}

								tooltip = "[ProvinceWindow.GetState.GetTradeRoutesTooltip]"
							}
							text_button_square_highlighted = {
								size = { 128 28 }
								parentanchor = vcenter
								blockoverride "Center_text"
								{
									text = "TRADE_GOODS_BUTTON"
								}
								enabled = "[ProvinceWindow.CanOpenTradeWindow]"
								blockoverride "On_click"
								{
									onclick = "[ProvinceWindow.CreateTradeRoute]"
								}
								tooltip = "[ProvinceWindow.GetTradeRouteTooltip]"
							}

							icon_button_square = {
								#visible = "[Not(ProvinceWindow.GetState.IsAiAllowedToTrade)]"
								visible = "[And(ProvinceWindow.CanOpenTradeWindow, ProvinceWindow.GetState.IsAiAllowedToTrade)]"
								enabled = "[ProvinceWindow.CanOpenTradeWindow]"
								parentanchor = vcenter
								size = { 28 28 }

								tooltip = "TRADEROUTE_NOT_AUTOMATIC_FOR_STATE"
								blockoverride "Icon"
								{
									texture = "gfx/interface/icons/shared_icons/trade.dds"
									size = { 24 24 }
								}

								blockoverride "On_click"
								{
									onclick = "[ProvinceWindow.ToggleAiTradeAllowance]"
								}
							}
							icon_button_square = {
								visible = "[And(ProvinceWindow.CanOpenTradeWindow, Not(ProvinceWindow.GetState.IsAiAllowedToTrade))]"
								#visible = "[ProvinceWindow.GetState.IsAiAllowedToTrade]"
								enabled = "[ProvinceWindow.CanOpenTradeWindow]"
								parentanchor = vcenter
								size = { 28 28 }

								tooltip = "TRADEROUTE_AUTOMATIC_FOR_STATE"
								blockoverride "Icon"
								{
									texture = "gfx/interface/icons/shared_icons/trade.dds"
									size = { 18 18 }
									position = { -6 -3 }
									
									
									icon = {
										using = negative_color_texture
										size = { 18 16 }
										position = { 10 5 }
										parentanchor = bottom|right
										modify_texture = {
											name = "Alpha"
											texture = "gfx/interface/base_parts/ex_mark.dds"
											framesize = { 50 50 }
											frame = 2
											blend_mode = alphamultiply
										}	
									}
								}

								blockoverride "On_click"
								{
									onclick = "[ProvinceWindow.ToggleAiTradeAllowance]"
								}
							}
						}
					}
				}
				hbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					margin = { 8 0 }
					visible = "[GetVariableSystem.HasValue( 'show_governorship', 'yes' )]"
					margin_widget = {
						size = { 700 100 }
						layoutpolicy_vertical = expanding
						margin_top = 10
						#position = { 90 90}
						cpt_button = {
							position = { -21 11 }
							parentanchor = vcenter
							name = "governor_portrait"
							blockoverride "Size" { size = { 80 126 } }
							blockoverride "Context" { datacontext = "[ProvinceWindow.GetState.GetGovernorOrRuler]" }
							margin_bottom = 2
							blockoverride "portrait_button_template_tooltip" 
							{ 
								tooltip = "[ProvinceWindow.GetState.GetGovernorOrRuler.GetTooltip]"
							} 
						}
						#Buttons
						flowcontainer = {
							visible = "[ProvinceWindow.IsPlayerProvince]"
							position = { 62 50 }
							spacing = 4
							direction = vertical
							flowcontainer = {
								icon_button_square = {
									tooltip = "#T Show State#!"
									blockoverride "On_click"
									{
										onclick = "[GetVariableSystem.Set( 'show_governorship', 'no' )]"
										clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_sub_tab"
										oversound = "event:/SFX/UI/Generic/sfx_ui_generic_mouse_over"
									} 
									
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/province.dds"
										size = { 90% 90% }
									}
										
									size = { 40 40 }
								}						
							}
							flowcontainer = {
								icon_button_square = {
									tooltip = "#T Toggle raw / manufactured goods display#!"
									blockoverride "On_click"
									{
										onclick = "[GetVariableSystem.Toggle('show_manufactured_goods')]"
										clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_sub_tab"
										oversound = "event:/SFX/UI/Generic/sfx_ui_generic_mouse_over"
									} 
									
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/modifiers/base_resources.dds"
										size = { 90% 90% }
									}
										
									size = { 40 40 }
								}						
							}
							flowcontainer = {
								icon_button_square = {
									tooltip = "#T Show regional industries#!"
									blockoverride "On_click"
									{
										onclick = "[GetVariableSystem.Toggle('show_industries')]"
										clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_sub_tab"
										oversound = "event:/SFX/UI/Generic/sfx_ui_generic_mouse_over"
									} 
									
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/promote_infrastructure_spending.dds"
										size = { 90% 90% }
									}
										
									size = { 40 40 }
								}						
							}
						}
						# View 1: raw goods
						container = {
							ignoreinvisible = yes
							position = { 110 0 }
							visible = "[Not(GetVariableSystem.Exists('show_manufactured_goods'))]"
							flowcontainer = {
								direction = vertical
								flowcontainer = {
									ignoreinvisible = yes
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_CHOCOLATE_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/chocolate.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_CHOCOLATE_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_FUR_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/fur.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_FUR_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_GRAIN_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/grain.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_GRAIN_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_VEGETABLES_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/vegetables.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_VEGETABLES_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_INDUSTRIAL_FIBRES_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/industrial_fibres.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_INDUSTRIAL_FIBRES_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_TEXTILE_FIBRES_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/textile_fibres.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_TEXTILE_FIBRES_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_WOOL_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/wool.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_WOOL_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_SILK_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/silk.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_SILK_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_WOOD_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/wood.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_WOOD_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_STONE_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/stone.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_STONE_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_SULPHUR_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/sulphur.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_SULPHUR_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_WHALES_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/whales.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_WHALES_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_SPICES_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/spices.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_SPICES_STOCKPILE"}
									}
								}
								flowcontainer = {
									ignoreinvisible = yes
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_LIVESTOCK_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/livestock.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_LIVESTOCK_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_GEMS_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/gems.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_GEMS_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_PEAT_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/peat.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_PEAT_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_TIN_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/tin.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_TIN_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_INORGANIC_COMPOUNDS_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/inorganic_compounds.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_INORGANIC_COMPOUNDS_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_COPPER_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/copper.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_COPPER_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_IRON_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/iron.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_IRON_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_GOLD_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/gold.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_GOLD_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_SILVER_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/silver.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_SILVER_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_DYE_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/dye.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_DYE_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_LEAD_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/lead.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_LEAD_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_COAL_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/coal.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_COAL_STOCKPILE"}
									}
								}
								flowcontainer = {
									ignoreinvisible = yes
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_OIL_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/oil.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_OIL_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_TEA_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/tea.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_TEA_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_COFFEE_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/coffee.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_COFFEE_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_OPIUM_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/opium.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_OPIUM_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_TOBACCO_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/tobacco.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_TOBACCO_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_SUGAR_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/sugar.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_SUGAR_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_HARDWOOD_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/hardwood.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_HARDWOOD_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_RUBBER_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/rubber.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_RUBBER_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_TROPICAL_FRUIT_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/tropical_fruit.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_TROPICAL_FRUIT_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_MEDITERRANEAN_FRUIT_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/mediterranean_fruit.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_MEDITERRANEAN_FRUIT_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_TEMPERATE_FRUIT_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/temperate_fruit.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_TEMPERATE_FRUIT_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_SALT_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/salt.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_SALT_STOCKPILE"}
									}
									icon_card_goods = {
										
										tooltip = "PROVWINDOW_GOV_FISH_PRODUCED_TT"
										blockoverride "Icon" { texture = "gfx/interface/icons/tradegoods/fish.dds" }
										blockoverride "Text" { text = "PROVWINDOW_GOV_FISH_STOCKPILE"}
									}					
								}
							}
						}
						# View 2: manufactured goods
					container = {
						visible = "[GetVariableSystem.Exists('show_manufactured_goods')]"  
						container = {
							visible = "[GreaterThan_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_free_industry_slots'), '(CFixedPoint)0' )]"
							parentanchor = left
							position = { 125 45 }
							icon = {
								parentanchor = vcenter
								size = { 50 50 }
								texture = "gfx/interface/buttons/button_round_46_red.dds"
								tooltip = "Available Industries in the region of [ProvinceWindow.GetState.GetGovernorship.GetNameWithNoTooltip]:  [GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_free_industry_slots')|0G]"
							}
							textbox = {
								visible = "[GreaterThan_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_free_industry_slots'), '(CFixedPoint)0' )]"
								position = { 1 -5 }
								parentanchor = center
								size = { 0 5 }
								autoresize = yes
								text = "[GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_free_industry_slots')|0]"
								font = BaseFont
								fontsize = 40
								fontcolor = { 0.9 0.9 0.9 1 } #color is white when non-zero, black when 0.
								alpha = 0.999
								using = tooltip_below
							}
						}
						container = {
							visible = "[LessThanOrEqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_free_industry_slots'), '(CFixedPoint)0' )]"
							parentanchor = left
							position = { 125 45 }
							icon = {
								parentanchor = vcenter
								size = { 50 50 }
								texture = "gfx/interface/buttons/button_round_46_red.dds"
								tooltip = "Available Industries in the region of [ProvinceWindow.GetState.GetGovernorship.GetNameWithNoTooltip]:  [GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_free_industry_slots')|0X]"
							}
							textbox = {
								position = { 1 -5 }
								parentanchor = center
								size = { 0 5 }
								autoresize = yes
								text = "[GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_free_industry_slots')|0]"
								font = BaseFont
								fontsize = 40
								fontcolor = { 0 0 0 1 }
								alpha = 0.999
								using = tooltip_below
							}
						}
						container = {
							visible = "[GreaterThan_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_used_industry_slots'), '(CFixedPoint)0' )]"
							parentanchor = left
							position = { 125 128 }
							icon = {
								parentanchor = vcenter
								size = { 50 50 }
								texture = "gfx/interface/buttons/button_round_46_red.dds"
								tooltip = "Used Industries in the region of [ProvinceWindow.GetState.GetGovernorship.GetNameWithNoTooltip]:  [GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_used_industry_slots')|0G]"
							}
							textbox = {
								position = { 1 -5 }
								parentanchor = center
								size = { 0 5 }
								autoresize = yes
								text = "[GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_used_industry_slots')|0]"
								font = BaseFont
								fontsize = 40
								using = BaseFontS
								fontcolor = { 0.9 0.9 0.9 1 }
								alpha = 0.999
								using = tooltip_below
							}
						}
						container = {
							visible = "[LessThanOrEqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_used_industry_slots'), '(CFixedPoint)0' )]"
							parentanchor = left
							position = { 125 128 }
							icon = {
								parentanchor = vcenter
								size = { 50 50 }
								texture = "gfx/interface/buttons/button_round_46_red.dds"
								tooltip = "Used Industries in the region of [ProvinceWindow.GetState.GetGovernorship.GetNameWithNoTooltip]:  [GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_used_industry_slots')|0X]"
							}
							textbox = {
								position = { 1 -5 }
								parentanchor = center
								size = { 0 5 }
								autoresize = yes
								text = "[GuiScope.SetRoot(ProvinceWindow.GetState.GetGovernorship.MakeScope).ScriptValue('INDUSTRY_governorship_used_industry_slots')|0]"
								font = BaseFont
								fontsize = 40
								using = BaseFontS
								fontcolor = { 0 0 0 1 }
								alpha = 0.999
								using = tooltip_below
							}
						}
					}
						container = {
							visible = "[GetVariableSystem.Exists('show_manufactured_goods')]"
							parentanchor = right
							position = { 20 0 }
							flowcontainer = {
								direction = vertical 
								flowcontainer = {
									
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_CLOTHING_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/clothing.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_CLOTHING_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_CLOTHING_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									        enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_clothing_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_clothing_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_LUXURY_CLOTHING_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/luxury_clothing.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_LUXURY_CLOTHING_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_LUXURY_CLOTHING_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_luxury_clothing_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_luxury_clothing_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_FURNITURE_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/furniture.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_FURNITURE_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_FURNITURE_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_furniture_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_furniture_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_LUXURY_FURNITURE_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/luxury_furniture.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_LUXURY_FURNITURE_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_LUXURY_FURNITURE_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_luxury_furniture_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_luxury_furniture_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_ALCOHOL_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/alcohol.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_ALCOHOL_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_ALCOHOL_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_alcohol_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_alcohol_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_GLASS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/glass.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_glass_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_glass_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_glass_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_glass_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_PHARMACEUTICALS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/pharmaceuticals.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_PHARMACEUTICALS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_PHARMACEUTICALS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_pharmaceuticals_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_pharmaceuticals_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_PROCESSED_FOODS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/processed_foods.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_PROCESSED_FOODS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_PROCESSED_FOODS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_processed_foods_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_processed_foods_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
								}
								flowcontainer = {
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_MOTORS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/motors.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_MOTORS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_MOTORS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_motors_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_motors_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_ELECTRONICS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/electronics.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_electronics_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_electronics_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_electronics_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_electronics_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}	
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_RARE_ALLOYS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/rare_alloys.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_RARE_ALLOYS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_RARE_ALLOYS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_rare_alloys_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_rare_alloys_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_CONSTRUCTION_MATERIALS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/construction_materials.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_CONSTRUCTION_MATERIALS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_CONSTRUCTION_MATERIALS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_construction_materials_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_construction_materials_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_STEEL_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/steel.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_STEEL_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_STEEL_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_steel_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_steel_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_BRONZE_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/bronze.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_BRONZE_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_BRONZE_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_bronze_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_bronze_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_MACHINE_PARTS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/machine_parts.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_MACHINE_PARTS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_MACHINE_PARTS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_machine_parts_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_machine_parts_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_CHEMICALS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/chemicals.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_CHEMICALS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_CHEMICALS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_chemicals_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_chemicals_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
								}
								flowcontainer = {
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_EARLY_MUNITIONS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/early_munitions.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_EARLY_MUNITIONS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_EARLY_MUNITIONS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_early_munitions_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_early_munitions_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_LATE_MUNITIONS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/late_munitions.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_LATE_MUNITIONS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_LATE_MUNITIONS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_late_munitions_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_late_munitions_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_NAVAL_SUPPLIES_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/naval_supplies.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_NAVAL_SUPPLIES_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_NAVAL_SUPPLIES_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_naval_supplies_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_naval_supplies_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_STEEL_SHIPS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/steel_ships.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_STEEL_SHIPS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_STEEL_SHIPS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_steel_ships_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_steel_ships_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_WOODEN_SHIPS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/wooden_ships.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_WOODEN_SHIPS_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_WOODEN_SHIPS_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_wooden_ships_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_wooden_ships_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_EARLY_ARTILLERY_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/early_artillery.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_EARLY_ARTILLERY_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_EARLY_ARTILLERY_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_early_artillery_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_early_artillery_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_LATE_ARTILLERY_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/late_artillery.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_LATE_ARTILLERY_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_LATE_ARTILLERY_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_late_artillery_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_late_artillery_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
									industrial_goods_widget = {
									    tooltip = "PROVWINDOW_GOV_PETROCHEMICALS_PRODUCED_TT"
									    blockoverride "Icon"
									    {
									        texture = "gfx/interface/icons/tradegoods/petrochemicals.dds"
									    }
									    blockoverride "IndustriesText"
									    {
									        text = "PROVWINDOW_GOV_petrochemicals_NUM_FACTORIES"
									    }
									    blockoverride "StockpileText"
									    {
									        text = "PROVWINDOW_GOV_petrochemicals_STOCKPILE"
									    }
									    blockoverride "On_click"
									    {
									       enabled = "[EqualTo_CFixedPoint( GuiScope.SetRoot(ProvinceWindow.GetProvince.GetOwner.MakeScope).ScriptValue('INDUSTRY_unlocked_clothing'), '(CFixedPoint)1' )]"
									        onclick = "[GetScriptedGui('add_petrochemicals_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									    blockoverride "On_rightclick"
									    {
									        onrightclick = "[GetScriptedGui('remove_petrochemicals_button').Execute( GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									    }
									}
								}
							}
						}
						# Flowcontainer 2: wealth information
						container = {
							parentanchor = left
							position = { -5 195 }
							# Pop wealth
							flowcontainer = {
								direction = horizontal
								icon_and_text = {
									size = { 100 0 }
									tooltip = "PROVWINDOW_GOV_WEALTH_TT"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/treasury.dds"
									}
									blockoverride "Text"
									{
										text = "[GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).ScriptValue('WEALTH_governorship_total')|2]"
									}
								}
								icon_and_text = {
									size = { 86 0 }
									tooltip = "PROVWINDOW_GOV_UPPER_STRATA_WEALTH_TT"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/pop_types/upper_strata.dds"
									}
									blockoverride "Text"
									{
										text = "[GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).ScriptValue('WEALTH_governorship_upper_strata')|2]"
									}
								}
								icon_and_text = {
									size = { 86 0 }
									tooltip = "PROVWINDOW_GOV_MIDDLE_STRATA_WEALTH_TT"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/pop_types/middle_strata.dds"
									}
									blockoverride "Text"
									{
										text = "[GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).ScriptValue('WEALTH_governorship_middle_strata')|2]"
									}
								}
								icon_and_text = {
									size = { 86 0 }
										tooltip = "PROVWINDOW_GOV_LOWER_STRATA_WEALTH_TT"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/pop_types/lower_strata.dds"
									}
									blockoverride "Text"
									{
										text = "[GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).ScriptValue('WEALTH_governorship_lower_strata')|2]"
									}
								}
								icon_and_text = {
									size = { 86 0 }
									tooltip = "PROVWINDOW_GOV_PROLETARIAT_WEALTH_TT"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/pop_types/proletariat.dds"
									}
									blockoverride "Text"
									{
										text = "[GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).ScriptValue('WEALTH_governorship_proletariat')|2]"
									}
								}
								icon_and_text = {
									size = { 86 0 }
									tooltip = "PROVWINDOW_GOV_INDENTURED_WEALTH_TT"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/pop_types/indentured.dds"
									}
									blockoverride "Text"
									{
										text = "[GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).ScriptValue('WEALTH_governorship_indentured')|2]"
									}
								}
								icon_and_text = {
									size = { 86 0 }
									tooltip = "PROVWINDOW_GOV_TRIBESMEN_WEALTH_TT"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/pop_types/tribesmen.dds"
									}
									blockoverride "Text"
									{
										text = "[GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).ScriptValue('WEALTH_governorship_tribesmen')|2]"
									}
								}
								icon_and_text = {
									size = { 86 0 }
									tooltip = "PROVWINDOW_GOV_SLAVES_WEALTH_TT"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/pop_types/slaves.dds"
									}
									blockoverride "Text"
									{
										text = "[GuiScope.SetRoot( ProvinceWindow.GetState.GetGovernorship.MakeScope ).ScriptValue('WEALTH_governorship_slaves')|2]"
									}
								}
							}
						}
					}
				}
			}
		}
	}
	
	base_window = {
		name = "province_details"
		movable = no
		@province_height_large = 490 
		@province_height_small = 141
		blockoverride "BackgroundGradient" { visible = no }
		size = { @window_width @province_height_large }
		
		parentanchor = bottom
		visible = "[ProvinceWindow.HasProvince]"
		alwaystransparent = no
		allow_outside = yes
		
		state = {
			name = _show
			
			start_sound = {
				soundeffect = "event:/SFX/UI/Province/sfx_ui_province_select_window"
			}
		}
		
		secondary_header = {  
			name = "uncolonized_main_header"
			#layoutpolicy_horizontal = expanding
			widgetanchor = bottom
			size = { 768 36 }
			visible = "[Not(ProvinceWindow.HasState)]"

			blockoverride "Title_text"
			{
				text = "[ProvinceWindow.GetProvince.GetAreaName]"  
				margin_left = @window_margin_left_title
			}
			blockoverride "White_buttons"
			{
				button_close = { 
					visible = yes
					onclick = "[ProvinceWindow.OnClose]"
					tooltip = "CLOSE"
				}
			}
		}
		
		vbox = {
			name = "city_main_box"
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding
		
			hbox = {
				name = "top_row"
				layoutpolicy_horizontal = expanding

				sub_header = {  
					name = "uncolonized_sub_header"
					layoutpolicy_horizontal = expanding
					size = { 0 33 }
					visible = "[Not(ProvinceWindow.HasState)]"
		
					blockoverride "Title_text"
					{
						datacontext = "[ProvinceWindow.GetProvince]"
						text = "UNCOLONIZED_TITLE"  
						margin_left = @window_margin_left_title					
					}
					blockoverride "LineVisibility" { visible = no }
					
				}
				sub_header = {  
					visible = "[ProvinceWindow.HasState]" 
					name = "city_header"
					layoutpolicy_horizontal = expanding
					size = { 0 32 }
					blockoverride "Title_text"
					{
						text = "[ProvinceWindow.GetProvince.GetLongName]"  
						margin_left = @window_margin_left_title					
					}
					blockoverride "Max_text_width" 
					{
						max_width = 600
					}
				}
				hbox = {
					name = "city_header_buttons"
				}
			}
			
			hbox = {
				name = "second_row"
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = fixed
				margin_top = 1
				margin_bottom = -5
				
				margin_widget = {
					size = { 0 170 }
					layoutpolicy_horizontal = expanding
					icon = {
						size = { 760 170 }
						position = { 3 0 }
						#max_width = 700
						texture = "[GetTerrainIconBig(ProvinceWindow.GetProvince.GetTerrain)]"
						# tooltip = "[ProvinceWindow.GetProvince.GetTerrain.GetTooltip]"

						
						modify_texture = {
							name = "City_Alpha"
							texture = "gfx/interface/base_parts/province_terrain_alpha.dds"
							blend_mode = alphamultiply
						}
						tooltipwidget = {
							terrain_tooltip_base = {
								datacontext = "[ProvinceWindow.GetProvince.GetTerrain]"
							}
						}
						using = tooltip_nw
						
					}

				}
			}
			hbox = {
				name = "third_row"
				layoutpolicy_vertical = expanding
				layoutpolicy_horizontal = expanding
				margin_top = 8
				vbox = {
					name = "summary_details"
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					layoutstretchfactor_horizontal = 4
					margin_left = 5
					sub_header_v = {   
						
						layoutpolicy_horizontal = expanding
						layoutpolicy_vertical = expanding
						size = { 0 40 }
						blockoverride "Title_text" 
						{
							text = "SUMMARY"
							margin_left = @window_margin_left_title
						}
						
						blockoverride "Max_text_width"
						{
							max_width = 208
						}
						vbox = {
							name = "statistics"
							layoutpolicy_horizontal = expanding
							layoutpolicy_vertical = expanding
							margin_top = 30
							margin_widget = {
								name = "numbers"
								layoutpolicy_horizontal = expanding
								layoutpolicy_vertical = expanding
								margin = { 12 6  }
								
								flowcontainer = {
									spacing = 2
									icon_and_text = {
										name = "city_food_income"
										size = { @stats_icon_width 0 }
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/food.dds"
										}
										blockoverride "Text"
										{
											text = "[ProvinceWindow.GetProvince.GetFoodIncome|2]"
										}
										tooltip = "[ProvinceWindow.GetProvince.GetFoodValueTooltip]"
									}
									
									icon_and_text = {
										size = { @stats_icon_width 0 }
										#position = { 250 -2 }
										tooltip = "[ProvinceWindow.GetProvince.GetIncomeDescription]"
										tooltip_verticalbehavior = flip
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/treasury.dds"
										}
										blockoverride "Text"
										{ 
											text = "[ProvinceWindow.GetProvince.GetCurrentIncome|2]"
										}
									}
									
									icon_and_text = {
										size = { @stats_icon_width 0 }
										name = "city_manpower_income"
										tooltip = "[ProvinceWindow.GetProvince.GetCurrentManpowerIncomeDescription]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/manpower.dds"
										}
										blockoverride "Text"
										{ 
											text = "[GetManpowerDisplay(ProvinceWindow.GetProvince.GetCurrentManpowerIncome)]"
										}
									}
								}
								
								flowcontainer = {
									spacing = 2
									position = { 0 36 }
									icon_and_text = {
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetProvince.GetCurrentResearchDescription]"
										tooltip_verticalbehavior = flip
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/research.dds"
										}
										blockoverride "Text"
										{ 
											text = "[ProvinceWindow.GetProvince.GetCurrentResearch|2]"
										}
									}
										
									icon_and_text = {
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetProvince.GetImpactOnStateLoyaltyTooltip]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/modifiers/local_monthly_state_loyalty.dds"
										}
										blockoverride "Text"
										{ 
											text = "[ProvinceWindow.GetProvince.GetImpactOnStateLoyalty|=2]"
										}
									}
									
									icon_and_text = {
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetProvince.GetUnrestDescription]"
										tooltip_verticalbehavior = flip
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/unrest.dds"
										}
										blockoverride "Text"
										{ 
											text = "[ProvinceWindow.GetProvince.GetUnrest|2]"
										}
									}
								}
								
								container = {
									using = NoninteractableBG
									position = { -4 74 }
									blockoverride "Margins"
									{
										margin_top = 2
										margin_bottom = 8
										margin_left = 2
										margin_right = 2
									}
									
									overlappingitembox = {
										visible = "[Not(IsDataModelEmpty(ProvinceWindow.GetModifiers))]"
										datamodel = "[ProvinceWindow.GetModifiers]"
										position = { 4 5 }
										size = { 200 36 }
										spacing = 2
										parentanchor = vcenter|left
										widgetanchor = vcenter|left
										righttoleft = yes
										
										item = {
											modifier_icon = {
												size = { 32 32 }
												datacontext = "[TimedModifier.GetModifier]"
												tooltip = "[TimedModifier.GetTooltip]"
											}
										}
									}
									
									textbox = {
										visible = "[IsDataModelEmpty(ProvinceWindow.GetModifiers)]"
										tooltip = NO_CURRENT_MODIFIERS_PROVINCE
										size = { 200 36 }
										position = { 4 0 }
										using = BaseFontS
										using = Black_FontColor
										text = None
										align = center
										alpha = 0.55
									}
								}
								
								icon_card = {
									name = "Trade_Good"
									size = { 100 40 }
									position = { 0 74 }
									parentanchor = right
									tooltip = "[ProvinceWindow.GetProducedTradeGoodsInfo]"
									blockoverride "Icon"
									{
										texture = "[GetTradeGoodsIcon(ProvinceWindow.GetProvince.GetTradeGoods)]"
										parentanchor = left|vcenter 
										position = { 2 0 }
									}
									
									textbox = {
										text = "[ProvinceWindow.GetProvince.GetNumGoodsProduced]"
										autoresize = yes
										align = right
										parentanchor = right
										position = { -10 6 }
										using = BaseFontM
										using = Black_FontColor
									}
								}

								
								flowcontainer = { 
									position = { 0 116 }
									spacing = 8
									ignoreinvisible = yes
									icon_and_text = {
										visible = "[Not( ProvinceWindow.GetProvince.GetCountryCulture.IsIntegrated )]"
										size = { 140 0 }
										tooltip_verticalbehavior = flip
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/governor_policies/cultural_assimilation.dds"
											datacontext = "[ProvinceWindow]"
											tooltip = "NON_INTEGRATED_CULTURE_TOOLTIP"
										}
										blockoverride "Text"
										{ 
											text = "[ProvinceWindow.GetProvince.GetCulture.GetName]"
											using = BaseFontS
											using = Black_FontColor
										}
									}
									
									icon_and_text = {
										visible = "[ProvinceWindow.GetProvince.GetCountryCulture.IsIntegrated]"
										size = { 140 0 }
										tooltip_verticalbehavior = flip
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/integrated.dds"
											datacontext = "[ProvinceWindow]"
											tooltip = "INTEGRATED_CULTURE_TOOLTIP"
										}
										blockoverride "Text"
										{ 
											text = "[ProvinceWindow.GetProvince.GetCulture.GetName]"
											using = BaseFontS
											using = Black_FontColor
										}
									}
									
									icon_and_text = {
										size = { 140 0 }
										tooltip_verticalbehavior = flip
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/religious.dds"
										}
										blockoverride "Text"
										{ 
											text = "[ProvinceWindow.GetProvince.GetReligion.GetName]"
											using = BaseFontS
											using = Black_FontColor
										}
									}
								}
								
								flowcontainer = {
									position = { 0 152 }
									spacing = 8
									icon_and_text = {
										name = "province_output"
										size = { 140 0 }
										tooltip = "[ProvinceWindow.GetProvince.GetModifierTooltip('local_output_modifier')]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/modifiers/local_output_modifier.dds"
										}
										blockoverride "Text"
										{
											text = "[ProvinceWindow.GetProvince.GetModifierValue('local_output_modifier')]"
										}
									}
									icon_and_text = {
										size = { 140 0 }
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/menu_buttons/menu_trade.dds"
										}
										blockoverride "Text"
										{
											text = "[GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).ScriptValue('SHIPPING_province_power')|0]"
										}
										tooltip = "This is the number of convoys that can pass through [ProvinceWindow.GetProvince.GetName]"
									}
								}
								flowcontainer = {
									position = { 18 210 }
									widget = {
										size = { 20 0 }
									}
									fixed_size_progressbar = {
										size = { 250 10 }
										progressbar = {
											size = { 100% 100% }
											value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetLocalCivilizationCap )]"
											marker = {
												container = {
													name = "progress_marker_2"     
													tooltip = "[ProvinceWindow.GetProvince.GetLocalCivilizationCapTooltip]"
													widget = {
														size = { 24 48 }
														icon = {
															using = flat_background_black
															size = { 3 10 }	
														}
													}
												}
											}
										}
										blockoverride "Value" { 
											value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetCivilizationValue )]" 
										}
										tooltip = "[ProvinceWindow.GetProvince.GetCivilizationTooltip]"
										using = tooltip_above
										parentanchor = right
										blockoverride "ProgressAlpha" { alpha = 0.6 }
									}								
								}
							}
						}
					}
				}
				vbox = {
					layoutpolicy_vertical = expanding
					layoutpolicy_horizontal = expanding
					
					ignoreinvisible = yes
					
					hbox = {
						layoutpolicy_vertical = fixed
						layoutpolicy_horizontal = expanding
						margin_top = 0 #Dirty Hax
						widget = {
							layoutpolicy_vertical = fixed
							layoutpolicy_horizontal = expanding 
							size = { 452 34 }
							
							hbox = { 
								layoutpolicy_vertical = preferred
								layoutpolicy_horizontal = expanding
								margin_right = 17
								margin_left = 4
								margin_top = 0
								spacing = 2
								visible = "[Not( Or( ProvinceWindow.GetProvince.HasGreatWork, ProvinceWindow.GetProvince.HasSecondaryGreatWork ) )]"
								@mincategorybuttonwidth = 136
								@maxcategorybuttonwidth = 160
								@mincategorybuttonheight = 28 
								@maxcategorybuttonheight = 34
								#widget = {
								#	size = { 0 35 } #Don't Ask
								#}
								state = {
									name = _show
									on_start = "[GetVariableSystem.Set('province_tabs', 'pops')]"
								} #This is ugly, but needs to be here to reset tabs after viewing a province with a Great Work (thereby hiding the tab)
								category_tab = {
									name = "pops_tab"
									blockoverride "MinSize" { size = { @mincategorybuttonwidth @mincategorybuttonheight } }
									blockoverride "MaxSize" { size = { @maxcategorybuttonwidth @maxcategorybuttonheight } }
									blockoverride "MinVisible" { visible = "[And( Not( GetVariableSystem.HasValue('province_tabs', 'pops')), GetVariableSystem.Exists('province_tabs'))]" }
									blockoverride "MaxVisible" { visible = "[Or( GetVariableSystem.HasValue( 'province_tabs', 'pops'), Not( GetVariableSystem.Exists('province_tabs') ) )]" }
									######## Shared Overrides
									blockoverride "Center_text" { visible = no }
									blockoverride "Center_text_and_icon" { visible = yes }
									blockoverride "Button_text" { 
										text = "[ProvinceWindow.GetProvince.GetPopulation('total')]/[ProvinceWindow.GetProvince.GetPopulationCapacityValue]"
										
									}
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/pop_type.dds"
										visible = yes
										
										size = { 36 36 }
									}
									tooltip = "[ProvinceWindow.GetProvince.GetPopulationCapacityInfo]"
									######## Small Button Overrides
									blockoverride "ClickFunction"
									{
										onclick = "[GetVariableSystem.Set('province_tabs', 'pops')]"
									}
								}   
								category_tab = { 
									name = "buildings_tab"
									blockoverride "MinSize" { size = { @mincategorybuttonwidth @mincategorybuttonheight } }
									blockoverride "MaxSize" { size = { @maxcategorybuttonwidth @maxcategorybuttonheight } }
									blockoverride "MinVisible" { visible = "[Not( GetVariableSystem.HasValue('province_tabs', 'buildings'))]" }
									blockoverride "MaxVisible" { visible = "[GetVariableSystem.HasValue('province_tabs', 'buildings')]" }
									######## Shared Overrides
									blockoverride "Center_text" { visible = no }
									blockoverride "Center_text_and_icon" { visible = yes }
									blockoverride "Button_text" { 
										text = "[GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).ScriptValue('JOBS_num_used_slots')|0]/[GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).ScriptValue('JOBS_buildings_cap')|0]" 
										
									}
									tooltip = "1 building can be built for every 2 non-tribal pops"
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/building_slot.dds"
										visible = yes
									}
									######## Small Button Overrides
									blockoverride "ClickFunction"
									{
										onclick = "[GetVariableSystem.Set('province_tabs', 'buildings')]"
									}
								} 
								category_tab = {
									name = "tactical_tab"
									blockoverride "MinSize" { size = { @mincategorybuttonwidth @mincategorybuttonheight } }
									blockoverride "MaxSize" { size = { @maxcategorybuttonwidth @maxcategorybuttonheight } }
									blockoverride "MinVisible" { visible = "[Not( GetVariableSystem.HasValue('province_tabs', 'tactical'))]" }
									blockoverride "MaxVisible" { visible = "[GetVariableSystem.HasValue('province_tabs', 'tactical')]" }
									######## Shared Overrides
									blockoverride "Center_text" { visible = no }
									blockoverride "Center_text_and_icon" { visible = yes }
									blockoverride "Button_text" { visible = no }
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/tactical.dds"
										visible = yes
									}
									tooltip = "TACTICAL_TAB"
									######## Small Button Overrides
									blockoverride "ClickFunction"
									{
										onclick = "[GetVariableSystem.Set('province_tabs', 'tactical')]"
									}
								} 
							}
							
							hbox = { 
								layoutpolicy_vertical = preferred
								layoutpolicy_horizontal = expanding
								margin_right = 17
								margin_left = 4
								margin_top = 0
								spacing = 2
								visible = "[Or( ProvinceWindow.GetProvince.HasGreatWork, ProvinceWindow.GetProvince.HasSecondaryGreatWork )]"
								@gwmincategorybuttonwidth = 106
								@gwmaxcategorybuttonwidth = 112
								@gwmincategorybuttonheight = 28 
								@gwmaxcategorybuttonheight = 34
								#widget = {
								#	size = { 0 35 } #Don't Ask
								#}
								category_tab = {
									name = "pops_tab2"
									blockoverride "MinSize" { size = { @gwmincategorybuttonwidth @gwmincategorybuttonheight } }
									blockoverride "MaxSize" { size = { @gwmaxcategorybuttonwidth @gwmaxcategorybuttonheight } }
									blockoverride "MinVisible" { visible = "[And( Not( GetVariableSystem.HasValue('province_tabs', 'pops')), GetVariableSystem.Exists('province_tabs'))]" }
									blockoverride "MaxVisible" { visible = "[Or( GetVariableSystem.HasValue( 'province_tabs', 'pops'), Not( GetVariableSystem.Exists('province_tabs') ) )]" }
									######## Shared Overrides
									blockoverride "Center_text" { visible = no }
									blockoverride "Center_text_and_icon" { visible = yes }
									blockoverride "Button_text" { 
										text = "[ProvinceWindow.GetProvince.GetPopulation('total')]/[ProvinceWindow.GetProvince.GetPopulationCapacityValue]"
									}
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/pop_type.dds"
										size = { 24 24 }
										#visible = no
										
									}
									tooltip = "[ProvinceWindow.GetProvince.GetPopulationCapacityInfo]"
									######## Small Button Overrides
									blockoverride "ClickFunction"
									{
										onclick = "[GetVariableSystem.Set('province_tabs', 'pops')]"
									}
								}   
								category_tab = { 
									name = "buildings_tab2"
									blockoverride "MinSize" { size = { @gwmincategorybuttonwidth @gwmincategorybuttonheight } }
									blockoverride "MaxSize" { size = { @gwmaxcategorybuttonwidth @gwmaxcategorybuttonheight } }
									blockoverride "MinVisible" { visible = "[Not( GetVariableSystem.HasValue('province_tabs', 'buildings'))]" }
									blockoverride "MaxVisible" { visible = "[GetVariableSystem.HasValue('province_tabs', 'buildings')]" }
									######## Shared Overrides
									blockoverride "Center_text" { visible = no }
									blockoverride "Center_text_and_icon" { visible = yes }
									blockoverride "Button_text" { 
										text = "[ProvinceWindow.GetProvince.GetTotalAmountOfBuildingLevels]/[ProvinceWindow.GetProvince.GetAllowedAmountOfBuildingLevels]" 
									}
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/building_slot.dds"
										size = { 24 24 }
										#visible = no
										
									}
									tooltip = "[ProvinceWindow.GetProvince.GetBuildingLevelInformation]"
									######## Small Button Overrides
									blockoverride "ClickFunction"
									{
										onclick = "[GetVariableSystem.Set('province_tabs', 'buildings')]"
									}
								} 
								category_tab = {
									name = "tactical_tab2"
									blockoverride "MinSize" { size = { @gwmincategorybuttonwidth @gwmincategorybuttonheight } }
									blockoverride "MaxSize" { size = { @gwmaxcategorybuttonwidth @gwmaxcategorybuttonheight } }
									blockoverride "MinVisible" { visible = "[Not( GetVariableSystem.HasValue('province_tabs', 'tactical'))]" }
									blockoverride "MaxVisible" { visible = "[GetVariableSystem.HasValue('province_tabs', 'tactical')]" }
									######## Shared Overrides
									blockoverride "Center_text" { visible = no }
									blockoverride "Center_text_and_icon" { visible = yes }
									blockoverride "Button_text" { visible = no }
									blockoverride "Icon"
									{
										texture = "gfx/interface/icons/shared_icons/tactical.dds"
										visible = yes
									}
									tooltip = "TACTICAL_TAB"
									######## Small Button Overrides
									blockoverride "ClickFunction"
									{
										onclick = "[GetVariableSystem.Set('province_tabs', 'tactical')]"
									}
								} 
								category_tab = {
									name = "GW_tab"
									blockoverride "MinSize" { size = { @gwmincategorybuttonwidth @gwmincategorybuttonheight } }
									blockoverride "MaxSize" { size = { @gwmaxcategorybuttonwidth @gwmaxcategorybuttonheight } }
									blockoverride "MinVisible" { visible = "[Not( GetVariableSystem.HasValue('province_tabs', 'great_works'))]" }
									blockoverride "MaxVisible" { visible = "[GetVariableSystem.HasValue('province_tabs', 'great_works')]" }
									######## Shared Overrides
									blockoverride "Center_text" { visible = no }
									blockoverride "Center_text_and_icon" { visible = yes }
									blockoverride "Button_text" { visible = no }
									blockoverride "Icon"
									{
										texture = "gfx/interface/province/gw_map_icon.dds"
									}
									tooltip = "GW_TAB"
									######## Small Button Overrides
									blockoverride "ClickFunction"
									{
										onclick = "[GetVariableSystem.Set('province_tabs', 'great_works')]"
									}
								}
							}
						}	
						
					}
					vbox = {
						name = "pops_tab"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						visible = "[Or( GetVariableSystem.HasValue( 'province_tabs', 'pops'), Not( GetVariableSystem.Exists('province_tabs') ) )]"
						state = {
							name = "show_pops_tab"
							
							on_start = "[PdxGuiWidget.Show]"
						}
						using = hide_province_tab

						margin_widget = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding
							margin = { 12 0 }
							margin_bottom = 0

							flowcontainer = {
								parentanchor = right
								position = { 0 	10 }
								spacing = 2
								pop_widget_province = {
									tooltip = "[ProvinceWindow.GetProvince.GetPopHappyInformation('upper_strata')]"
									tooltip_widgetanchor = vcenter|left
									blockoverride "BackgroundTexture" { texture = "gfx/interface/icons/pop_types/upper_strata_bg.dds" }
									blockoverride "HappinessBarValue"
									{
										visible = yes
										value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetPopTypeHappiness('upper_strata') )]"
									}
									blockoverride "Icon"
									{
										enabled = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('upper_strata'), '(int32)0' )]"
										texture = "gfx/interface/icons/pop_types/upper_strata.dds"
										tooltip = "[ProvinceWindow.GetProvince.GetPopulationTooltip('upper_strata')]"
									}
									blockoverride "NumPops"
									{
										text = "[ProvinceWindow.GetProvince.GetPopulation('upper_strata')]"
									}
									blockoverride "MarkerVisible"
									{
										visible = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('upper_strata'), '(int32)0' )]"
									}
									blockoverride "Frame"
									{
										frame = "[ProvinceWindow.GetProvince.GetPopHappyFrame( 'upper_strata' )]"
									}
								}
								pop_widget_province = {
									tooltip = "[ProvinceWindow.GetProvince.GetPopHappyInformation('middle_strata')]"
									tooltip_widgetanchor = vcenter|left
									blockoverride "BackgroundTexture" { texture = "gfx/interface/icons/pop_types/middle_strata_bg.dds" }
									blockoverride "HappinessBarValue"
									{
										visible = yes
										value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetPopTypeHappiness('middle_strata') )]"
									}
									blockoverride "Icon"
									{
										enabled = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('middle_strata'), '(int32)0' )]"
										texture = "gfx/interface/icons/pop_types/middle_strata.dds"
										tooltip = "[ProvinceWindow.GetProvince.GetPopulationTooltip('middle_strata')]"
									}
									blockoverride "NumPops"
									{
										text = "[ProvinceWindow.GetProvince.GetPopulation('middle_strata')]"
									}
									blockoverride "MarkerVisible"
									{
										visible = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('middle_strata'), '(int32)0' )]"
									}
									blockoverride "Frame"
									{
										frame = "[ProvinceWindow.GetProvince.GetPopHappyFrame( 'middle_strata' )]"
									}
								}
								pop_widget_province = {
									tooltip = "[ProvinceWindow.GetProvince.GetPopHappyInformation('proletariat')]"
									tooltip_widgetanchor = vcenter|left
									blockoverride "BackgroundTexture" { texture = "gfx/interface/icons/pop_types/proletariat_bg.dds" }
									blockoverride "HappinessBarValue"
									{
										visible = yes
										value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetPopTypeHappiness('proletariat') )]"
									}
									blockoverride "Icon"
									{
										enabled = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('proletariat'), '(int32)0' )]"
										texture = "gfx/interface/icons/pop_types/proletariat.dds"
										tooltip = "[ProvinceWindow.GetProvince.GetPopulationTooltip('proletariat')]"
									}
									blockoverride "NumPops"
									{
										text = "[ProvinceWindow.GetProvince.GetPopulation('proletariat')]"
									}
									blockoverride "MarkerVisible"
									{
										visible = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('proletariat'), '(int32)0' )]"
									}
									blockoverride "Frame"
									{
										frame = "[ProvinceWindow.GetProvince.GetPopHappyFrame( 'proletariat' )]"
									}
								}
								pop_widget_province = {
									tooltip = "[ProvinceWindow.GetProvince.GetPopHappyInformation('lower_strata')]"
									tooltip_widgetanchor = vcenter|left
									blockoverride "BackgroundTexture" { texture = "gfx/interface/icons/pop_types/lower_strata_bg.dds" }
									blockoverride "HappinessBarValue"
									{
										visible = yes
										value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetPopTypeHappiness('lower_strata') )]"
									}
									blockoverride "Icon"
									{
										enabled = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('lower_strata'), '(int32)0' )]"
										texture = "gfx/interface/icons/pop_types/lower_strata.dds"
										tooltip = "[ProvinceWindow.GetProvince.GetPopulationTooltip('lower_strata')]"
									}
									blockoverride "NumPops"
									{
										text = "[ProvinceWindow.GetProvince.GetPopulation('lower_strata')]"
									}
									blockoverride "MarkerVisible"
									{
										visible = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('lower_strata'), '(int32)0' )]"
									}
									blockoverride "Frame"
									{
										frame = "[ProvinceWindow.GetProvince.GetPopHappyFrame( 'lower_strata' )]"
									}	
								} 
								pop_widget_province = {
									tooltip = "[ProvinceWindow.GetProvince.GetPopHappyInformation('indentured')]"
									tooltip_widgetanchor = vcenter|left
									blockoverride "BackgroundTexture" { texture = "gfx/interface/icons/pop_types/indentured_bg.dds" }
									blockoverride "HappinessBarValue"
									{
										visible = yes
										value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetPopTypeHappiness('indentured') )]"
									}
									blockoverride "Icon"
									{
										enabled = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('indentured'), '(int32)0' )]"
										texture = "gfx/interface/icons/pop_types/indentured.dds"
										tooltip = "[ProvinceWindow.GetProvince.GetPopulationTooltip('indentured')]"
									}
									blockoverride "NumPops"
									{
										text = "[ProvinceWindow.GetProvince.GetPopulation('indentured')]"
									}
									blockoverride "MarkerVisible"
									{
										visible = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('indentured'), '(int32)0' )]"
									}
									blockoverride "Frame"
									{
										frame = "[ProvinceWindow.GetProvince.GetPopHappyFrame( 'indentured' )]"
									}	
								} 
								pop_widget_province = {
									tooltip = "[ProvinceWindow.GetProvince.GetPopHappyInformation('tribesmen')]"
									tooltip_widgetanchor = vcenter|left
									blockoverride "BackgroundTexture" { texture = "gfx/interface/icons/pop_types/tribesmen_bg.dds" }
									blockoverride "HappinessBarValue"
									{
										visible = yes
										value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetPopTypeHappiness('tribesmen') )]"
									}
									
									blockoverride "Icon"
									{
										enabled = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('tribesmen'), '(int32)0' )]"
										texture = "gfx/interface/icons/pop_types/tribesmen.dds"
										tooltip = "[ProvinceWindow.GetProvince.GetPopulationTooltip('tribesmen')]"
									}
									blockoverride "NumPops"
									{
										text = "[ProvinceWindow.GetProvince.GetPopulation('tribesmen')]"
									}
									blockoverride "MarkerVisible"
									{
										visible = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('tribesmen'), '(int32)0' )]"
									}
									blockoverride "Frame"
									{
										frame = "[ProvinceWindow.GetProvince.GetPopHappyFrame( 'tribesmen' )]"
									}
								}
								pop_widget_province = {
									tooltip = "[ProvinceWindow.GetProvince.GetPopHappyInformation('slaves')]"
									tooltip_widgetanchor = vcenter|left
									blockoverride "BackgroundTexture" { texture = "gfx/interface/icons/pop_types/slaves_bg.dds" }
									blockoverride "HappinessBarValue"
									{
										visible = yes
										value = "[FixedPointToFloat( ProvinceWindow.GetProvince.GetPopTypeHappiness('slaves') )]"
									}
									blockoverride "Icon"
									{
										enabled = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('slaves'), '(int32)0' )]"
										texture = "gfx/interface/icons/pop_types/slaves.dds"
										tooltip = "[ProvinceWindow.GetProvince.GetPopulationTooltip('slaves')]"
									}
									blockoverride "NumPops"
									{
										text = "[ProvinceWindow.GetProvince.GetPopulation('slaves')]"
									}
									blockoverride "MarkerVisible"
									{
										visible = "[GreaterThan_int32( ProvinceWindow.GetProvince.GetPopulation('slaves'), '(int32)0' )]"
									}
									blockoverride "Frame"
									{
										frame = "[ProvinceWindow.GetProvince.GetPopHappyFrame( 'slaves' )]"
									}
								}
							}
							text_button_square_highlighted = {
								size = { 200 0 }
								blockoverride "On_click" { onclick = "[ProvinceWindow.ShowPopDetails('slaves')]" }
								blockoverride "Center_text" 
								{ 
									text = "POP_SCREEN" 
									max_width = 162
								}
								tooltip = "OPEN_POPS_VIEW_TT"
								parentanchor = bottom|right
								position = { -3 -16 }
							}
							text_button_square_highlighted = {
								size = { 200 0 }
								blockoverride "On_click" { onclick = "[ProvinceWindow.OpenMovePopsWindow]" }
								blockoverride "Center_text" 
								{ 
									text = "MOVE_SLAVES" 
									max_width = 162
								}
								parentanchor = bottom|left
								position = { -3 -16 }
								visible = "[ProvinceWindow.IsPlayerProvince]"
							}
						}
					}
					vbox = {
						name = "buildings_tab"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						visible = "[GetVariableSystem.HasValue( 'province_tabs', 'buildings')]"
						state = {
							name = "show_buildings_tab"
							
							on_start = "[PdxGuiWidget.Show]"
						}
						using = hide_province_tab
						margin_widget = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding
							margin = { 6 6 }
							margin_bottom = 0
							
							scrollarea = {
								size = { 100% 100% }
								scrollbarpolicy_horizontal = always_off
								
								scrollbar_vertical = {
									using = VerticalScrollBar
								}
								
								scrollwidget = {
									dynamicgridbox = {
										name = "possible_buildings_grid"
										position = { 0 0 } 
										datamodel_wrap = 2
										
										datamodel = "[ProvinceWindow.GetPossibleBuildings]"
										
										item = {
											widget = {
												size = { 55	80 }
												building_item_button = {
													blockoverride "On_click" { 
														onclick = "[BuildingItem.Build]" 
														#enabled = "[Or( BuildingItem.CanBuild, BuildingItem.HasQueue )]"
														onrightclick = "[BuildingItem.CancelOrDestroy]"
													}
													blockoverride "Text" { text = "[BuildingItem.GetLevel]" }
													blockoverride "ExtraText" 
													{
														visible = "[BuildingItem.HasQueue]"
														text = "+[BuildingItem.GetQueueSize]"
													}
													blockoverride "Tooltip" {
														text = "Awooga!"
													}
												}
											}
										}
										
									}
								}
							}
							scrollarea = {
								size = { 280 38 }
								scrollbarpolicy_horizontal = always_off
								parentanchor = bottom
								scissor = yes
								position = { 0 -13 }
								scrollbar_vertical = {
									using = VerticalScrollBar
								}
								using = VerticalScrollAreaCutOff
								scrollwidget = {
									overlappingitembox = {
										name = "queued_buildings_grid"
										size = { 100% 100% }
										#datamodel_wrap = 1
										
										datamodel = "[ProvinceWindow.GetQueuedBuildings]"
										
										item = {
											button = {
												gfxtype = togglepushbuttongfx
												size = { 38 38 }
												onrightclick = "[BuildingItem.Cancel]"
												onclick = "[BuildingItem.Cancel]"
												background = {
													using = flat_background_white
													shaderfile = "gfx/FX/pdxgui_default.shader"
													spriteType = corneredtiled		
													modify_texture = {
														name = "Alpha" 
														spriteborder = { 16 16 }
														spriteType = Corneredtiled
														texture = "gfx/interface/base_parts/portrait_x32y32bd_alpha.dds"
														blend_mode = alphamultiply
													}
												}
												icon = {
													size = { 32 32 }
													parentanchor = center|center
													texture = "[GetBuildingIcon( BuildingItem.GetBuilding )]"
													modify_texture = {
														spriteborder = { 16 16 }
														spriteType = Corneredtiled
														texture = "gfx/interface/base_parts/portrait_x32y32bd_alpha.dds"
														blend_mode = alphamultiply
													}
												}
												tooltip = "CANCEL_BUILDING_HERE"
											}
										}
										
									}
								}
							}
							text_button_square_highlighted = {
								visible = "[HasDlc('Heirs of Alexander')]"
								parentanchor = bottom|right
								position = { -6 -16 }
								size = { 148 0 }
								blockoverride "Center_text" { text = "OPEN_GREAT_WORKS" }
								blockoverride "On_click" 
								{
									onclick = "[ProvinceWindow.OpenGreatWorkWindowBuild]" 
									enabled = "[ProvinceWindow.CanBuildGreatWork]"
									tooltip = "[ProvinceWindow.CanBuildGreatWorkTooltip]"
								}
							}
						}
						
					}
					vbox = {
						name = "tactical_tab"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						visible = "[GetVariableSystem.HasValue('province_tabs', 'tactical')]"
						state = {
							name = "show_tactical_tab"
							
							on_start = "[PdxGuiWidget.Show]"
						}
						using = hide_province_tab
						
						margin_widget = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding
							margin = { 12 0 }
							margin_bottom = 0
							
							flowcontainer = {
								parentanchor = bottom
								position = { 0 -16 }
								spacing = 8
								ignoreinvisible = yes
								icon_button_square = {
									size = { 42 42 }
									
									datacontext = "[GetScriptedGui('mercenary_city_button')]"
									visible = "[ScriptedGui.IsShown( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									
									blockoverride "On_click"
									{
										enabled = "[ScriptedGui.IsValid( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
										onclick = "[ScriptedGui.Execute( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
										tooltip = "MERC_CITY_BUTTON"
									}
									
									blockoverride "Icon" { texture = "gfx/interface/icons/shared_icons/create_mercenary_state.dds" }
								}
								icon_button_square = {
									size = { 42 42 }
									
									datacontext = "[GetScriptedGui('league_city_button')]"
									visible = "[ScriptedGui.IsShown( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
									
									blockoverride "On_click"
									{
										enabled = "[ScriptedGui.IsValid( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
										onclick = "[ScriptedGui.Execute( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
										tooltip = "LEAGUE_CITY_BUTTON"
									}
									
									blockoverride "Icon" { texture = "gfx/interface/icons/shared_icons/create_mercenary_state.dds" }
								}
							}
							margin_widget = {
								size = { 100% 40 }
								position = { 0 -1 }
								hbox = {
									layoutpolicy_horizontal = expanding
									icon_and_text = {
										name = "supply_limit"
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetSupplyLimitDescription]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/supply_limit.dds"
										}
										blockoverride "Text"
										{
											text = "[ProvinceWindow.GetSupplyLimit|2]"
										}
									}
									icon_and_text = {
										name = "barbies"
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetProvince.GetBarbarianPowerShortTooltip]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/barbarian_power.dds"
										}
										blockoverride "Text"
										{
											text = "[ProvinceWindow.GetProvince.GetBarbarianPower|2]"
										}
									}
									icon_and_text = {
										name = "garrison"
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetProvince.GetGarrisonTooltip]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/garrison.dds"
										}
										blockoverride "Text"
										{
											text = "[ProvinceWindow.GetProvince.GetGarrison]"
										}
									}
									icon_and_text = {
										name = "fort_level"
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetProvince.GetFortLevelTooltip]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/shared_icons/fort_frames.dds"
											framesize = { 50 50 }
											frame = "[ProvinceWindow.GetProvince.GetFortLevel]" 
										}
										blockoverride "Text"
										{
											text = "[ProvinceWindow.GetProvince.GetFortLevel]"
										}
									}
									
								}
							}
							
							margin_widget = {
								size = { 100% 40 }
								position = { 0 40 }
								hbox = {
									layoutpolicy_horizontal = expanding
									widget = {
										size = { @stats_icon_width 0 }
									}
									widget = {
										size = { @stats_icon_width 0 }
									}
									icon_and_text = {
										name = "fort_defense"
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetProvince.GetLocalDefensiveTooltip]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/modifiers/local_defensive.dds"
										}
										blockoverride "Text"
										{
											text = "[ProvinceWindow.GetProvince.GetLocalDefensive|+=%]"
											fontsize = 13
											fontsize_min = 12
										}
									}
									icon_and_text = {
										name = "fort_level"
										size = { @stats_icon_width 0 }
										tooltip = "[ProvinceWindow.GetState.GetFortsDesc]"
										blockoverride "Icon"
										{
											texture = "gfx/interface/icons/modifiers/fort_limit.dds"
											framesize = { 50 50 }
											frame = "[ProvinceWindow.GetProvince.GetFortLevel]" 
										}
										blockoverride "Text"
										{
											text = "[ProvinceWindow.GetState.GetFortsCurrent]/[ProvinceWindow.GetState.GetFortsLimit]"
										}
									}
									
								}
							}
							
							margin_widget = {
								size = { 198 80 }
								position = { -2 -16 }
								parentanchor = right|bottom
								name = "recruit navies"
								tooltip = "BUILD_NAVIES_TT"
								enabled = "[ProvinceWindow.CanBuildShips]"
								visible = "[ProvinceCanHavePort(ProvinceWindow.GetProvince)]"

								background = {
									texture = "gfx/interface/base_parts/button_square_dropshadow_x16y16bd.dds"
									shaderfile = "gfx/FX/pdxgui_default.shader"
									spriteType = corneredtiled
									spriteborder = { 8 8 }
									margin_left = 4
									margin_bottom = 4
									alpha = 0.5
								}
								
								margin_widget = {
									size = { 100% 100% }
									margin = { 2 2 }
									margin_top = 1
									icon = {
										using = button_tiled_texture
										spriteType = Corneredtiled
										spriteborder = { 200 200 }
										size = { 100% 100% }
										framesize = { 200 200 }
									}
								}
								margin_widget = {
									size = { 100% 100% }
									margin = { 5 5 }
									margin_top = 4
									button = {
										size = { 100% 100% }
										texture = "gfx/interface/icons/province_window/recruit_navies.dds"
										onclick = "[ProvinceWindow.ShowBuildNavies]"
										modify_texture = {
											name = "Alpha"
											texture = "gfx/interface/base_parts/portrait_x32y32bd_alpha.dds"
											blend_mode = alphamultiply
											spriteType = Corneredtiled
											spriteborder = { 1 0 }
										}
									}
								}
								
							}
							
						}
					}
					vbox = {
						name = "great_works_tab"
						layoutpolicy_vertical = expanding
						layoutpolicy_horizontal = expanding
						visible = "[GetVariableSystem.HasValue('province_tabs', 'great_works')]"
						state = {
							name = "show_tactical_tab"
							
							on_start = "[PdxGuiWidget.Show]"
						}
						using = hide_province_tab
						
						margin_widget = {
							layoutpolicy_vertical = expanding
							layoutpolicy_horizontal = expanding
							margin = { 12 0 }
							margin_bottom = 0
							
							widget = { #Great Wonder under construction
								size = { 100% 100% }
								datacontext = "[ProvinceWindow.GetSelectedGreatWork]"
								visible = "[And(ProvinceWindow.HasGreatWork, Not(GreatWork.IsCompleted))]"
								
								container = {
									position = {0 6}

									textbox = {
										autoresize = yes
										using = BaseFontM
  		 								using = Black_FontColor

										text = "[GreatWork.GetName]"
									}
								}

								container = {
									parentanchor = bottom
									position = { 0 -14 }
									fixed_size_progressbar = {
										visible = "[GreatWork.IsMakingProgress]"
										size = { 180 7 }

										blockoverride "Value" { value = "[GreatWork.GetConstructionProgress]" }
										tooltip = "[GreatWork.GetConstructionTooltip]"
									}
									
									fixed_size_progressbar = {
										visible = "[Not(GreatWork.IsMakingProgress)]"
										size = { 180 7 }

										blockoverride "Value" { value = "[GreatWork.GetConstructionProgress]" }
										tooltip = "[GreatWork.GetConstructionTooltip]"
									}
								}
								
								widget = { # Trade Goods
									visible = "[Not(GreatWork.IsAncientWonder)]"
									size = { 80 36 }
									position = { 90 -24 }							
									parentanchor = bottom
									tooltip = "GW_GOODS_REQ_TT"

									flowcontainer = {
										position = { 6 0 }
										spacing = 4

										datamodel = "[ProvinceWindow.GetGreatWorkRequiredTradeGoods]"
										item = {
											icon = {
												size = { 32 32 }

												texture = "[GetTradeGoodsIcon(TradeGoodsGlue.GetTradeGood)]"
													
												tooltip = "[Localize(TradeGoodsGlue.GetTradeGood.GetKey)]"

												icon = {
													parentanchor = bottom|right
													size = { 60% 60% }
													visible = "[GreatWork.IsMissingTradeGoods(TradeGoodsGlue.GetTradeGood)]"
													tooltip = "GW_MISSING_TRADEGOODS_TT"
													texture = "gfx/interface/icons/shared_icons/tick_cross.dds"
													framesize = { 25 25 }
												}
											}
										}
									}
								}
								
								cpt_button = {
									visible = "[Not(GreatWork.IsAncientWonder)]"
									name = "portrait"
									datacontext = "[GreatWork.GetLeader]"
									tooltip = "[GreatWork.GetLeaderTooltip]"
									position = { 0 44 }
									size = { 80 124 }
									#button = {
									#	parentanchor = bottom|right
									#	position = {3 2}
									#	size = { 30 30 }					
									#	
									#	distribute_visual_state = no
									#	tooltip = "Change Leader"
									#
									#	onclick = "[ClickHighlight('btn_great_work_replace_leader')]"
									#	onclick = "[ProvinceWindow.OnClickChangeLeader]"				
									#	texture = "gfx/interface/buttons/button_round_40.dds"
									#	icon = {
									#		texture = "gfx/interface/icons/shared_icons/change.dds"
									#		parentanchor = hcenter|vcenter
									#		size = { 60% 60% }
									#		position = { 0 0 }
									#	}
									#	clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_sub_tab"
									#	#oversound = "event:/SFX/UI/Generic/sfx_ui_generic_mouse_over"
									#
									#	icon = {
									#		using = highlight_button_circle_45
									#		visible = "[ShouldHighlight('btn_great_work_replace_leader')]"
									#	}
									#}
								}
								
								icon = {
									visible = "[GreatWork.IsAncientWonder]"
									position = { -8 62 }
									size = { 120 120 }
									texture = "gfx/interface/icons/great_work/panel/construct_wonder.dds"
								}

								flowcontainer = { #Workpower
									visible = "[Not(GreatWork.IsAncientWonder)]"
									direction = vertical
									spacing = 8
									parentanchor = right
									position = { -8 34 }
									icon_and_text = {
										size = { 90 0 }
										blockoverride "Icon" { using = icon_pop_freemen }
										blockoverride "Text" { text = "[GreatWork.GetWorkingPopsByIndex('(int32)0')]" }
									}
									icon_and_text = {
										size = { 90 0 }
										blockoverride "Icon" { using = icon_pop_tribal }
										blockoverride "Text" { text = "[GreatWork.GetWorkingPopsByIndex('(int32)1')]" }
									}
									icon_and_text = {
										size = { 90 0 }
										blockoverride "Icon" { using = icon_pop_slaves }
										blockoverride "Text" { text = "[GreatWork.GetWorkingPopsByIndex('(int32)2')]" }
									}
								}
								
								flowcontainer = { #Effects
									position = { 94 48 }
									direction = vertical
									spacing = 0
									using = NoninteractableBG
									blockoverride "Margins"
									{
										margin = { 10 10 }
									}
									datamodel = "[GreatWork.GetEffects]"

									item = {
										margin_widget = {
											size = {220 30}					
											
											tooltip = "[GetGreatWorkEffectTooltip(GreatWorkEffectSelection.GetEffect, GreatWorkEffectSelection.GetEffectTier, ProvinceWindow.GetProvince)]"									
											widget = {
												visible = "[GreatWorkEffectSelection.IsSet]"
												size = { 30 30 }
												parentanchor = vcenter|left

												icon = {
													parentanchor = vcenter|hcenter
													size = { 85% 85% }
													texture = "[GetGreatWorkEffectIcon(GreatWorkEffectSelection.GetEffect)]"

													icon = {
														parentanchor = bottom|right
														size = {60% 60%}
														texture = "[GetGreatWorkEffectTierIcon(GreatWorkEffectSelection.GetEffectTier)]"
													}
												}
											}

											icon = {
												visible = "[Not(GreatWorkEffectSelection.IsSet)]"
												size = {30 30}
												parentanchor = vcenter|left
												texture = "gfx/interface/icons/shared_icons/ideas.dds"
											}

											icon_and_text = {
												visible = "[GreatWorkEffectSelection.IsSet]"
												parentanchor = vcenter
												position = { 26 0 }
												size = { 190 40 }
												max_width = 190
												blockoverride "Text"
												{
													text = "[GetGreatWorkEffectName(GreatWorkEffectSelection.GetEffect, GreatWorkEffectSelection.GetEffectTier)]"
												}
												blockoverride "Icon"
												{
													visible = no
												}
											}
										}
									}
								}

								text_button_square_highlighted = { #Update Button						
									parentanchor = bottom|right
									position = { 0 -16 }
									size = { 160 28 }

									visible = "[And(HasDlc('Heirs of Alexander'),Not(GreatWork.IsAncientWonder))]"

									blockoverride "Center_text" { text = "GW_EDIT_BUTTON" }
									tooltip = "GW_BUILD_BUTTON_TOOLTIP"
									blockoverride "On_click" { onclick = "[ProvinceWindow.OpenGreatWorkWindowEdit]" }
									blockoverride "ClickSound" { clicksound = "event:/SFX/UI/GreatWork/sfx_ui_great_work_open_panel" }

								}
								#icon = {
								#	texture = "gfx/interface/icons/shared_icons/change.dds"
								#	size = { 22 22 }
								#	color = { 0 0 0 1 }
								#	position = { -20 -15 }
								#	parentanchor = bottom|right
								#	visible = "[And(HasDlc('Heirs of Alexander'),Not(GreatWork.IsAncientWonder))]"
								#}
							}
							widget = { #Existing Great Wonder
								size = { 100% 100% }
								datacontext = "[ProvinceWindow.GetSelectedGreatWork]"
								visible = "[And(ProvinceWindow.HasGreatWork, GreatWork.IsCompleted)]"

								container = {
									position = {0 6}

									textbox = {
										autoresize = yes
										using = BaseFontM
  		 								using = Black_FontColor

										text = "[GreatWork.GetName]"
									}
								}

								flowcontainer = { # Tier Progress
									position = { 0 -15 }
									parentanchor = bottom|left
									widgetanchor = bottom|left

									tooltip = "[GetGreatWorkPrestigeTooltip(GreatWork.GetPrestige)]"
									
									great_work_tier = {
										size = {1 30 }
										blockoverride "progressbar_size"
										{
											size = { 0 0 }
										}
										blockoverride "progressbar_value"
										{
											value = "[GetGreatWorkEffectPrestigeTierProgess('gw_effect_tier_1', GreatWork.GetPrestige)]"
										}
									}
									great_work_tier = {
										size = { 70 30}
										blockoverride "tier_text"
										{
											text = "[GetGreatWorkEffectTierName('gw_effect_tier_2')]"
										}
										blockoverride "tier_tooltip"
										{
											tooltip = "[GetGreatWorkEffectTierTooltip('gw_effect_tier_2')]"
										}
										blockoverride "progressbar_value"
										{
											value = "[GetGreatWorkEffectPrestigeTierProgess('gw_effect_tier_2', GreatWork.GetPrestige)]"
										}
									}
									great_work_tier = {
									size = { 70 30}
										blockoverride "tier_text"
										{
											text = "[GetGreatWorkEffectTierName('gw_effect_tier_3')]"
										}
										blockoverride "tier_tooltip"
										{
											tooltip = "[GetGreatWorkEffectTierTooltip('gw_effect_tier_3')]"
										}
										blockoverride "progressbar_value"
										{
											value = "[GetGreatWorkEffectPrestigeTierProgess('gw_effect_tier_3', GreatWork.GetPrestige)]"					
										}
									}
									great_work_tier = {
									size = { 70 30}
										blockoverride "tier_text"
										{
											text = "[GetGreatWorkEffectTierName('gw_effect_tier_4')]"
										}
										blockoverride "tier_tooltip"
										{
											tooltip = "[GetGreatWorkEffectTierTooltip('gw_effect_tier_4')]"
										}
										blockoverride "progressbar_value"
										{
											value = "[GetGreatWorkEffectPrestigeTierProgess('gw_effect_tier_4', GreatWork.GetPrestige)]"
										}
									}
								}

								flowcontainer = {
									parentanchor = top|left
									widgetanchor = top|left
									position = {-5 44 }
									spacing = 10
									widget = { #Image							
										size = { 130 130 }

										icon = {
											parentanchor = vcenter|hcenter
											size = {100% 100%}
											position = {0 -10}
											texture = "[GetGreatWorkImage(ProvinceWindow.GetSelectedGreatWork)]"					

											modify_texture = {
												name = "Alpha"
												texture = "gfx/interface/base_parts/background_x60bd_alpha.dds"
												blend_mode = alphamultiply
												spriteType = Corneredtiled
												spriteborder = { 60 60 }
											}
										}

									}

									flowcontainer = { #Effects									
									direction = vertical
									spacing = 0
									using = NoninteractableBG
									blockoverride "Margins"
									{
										margin = { 10 10 }
									}
									datamodel = "[GreatWork.GetEffects]"

									item = {
										margin_widget = {
											size = {220 30}					
											
											tooltip = "[GetGreatWorkEffectTooltip(GreatWorkEffectSelection.GetEffect, GreatWorkEffectSelection.GetEffectTier, ProvinceWindow.GetProvince)]"									
											widget = {
												visible = "[GreatWorkEffectSelection.IsSet]"
												size = { 30 30 }
												parentanchor = vcenter|left

												icon = {
													parentanchor = vcenter|hcenter
													size = { 85% 85% }
													texture = "[GetGreatWorkEffectIcon(GreatWorkEffectSelection.GetEffect)]"

													icon = {
														parentanchor = bottom|right
														size = {60% 60%}
														texture = "[GetGreatWorkEffectTierIcon(GreatWorkEffectSelection.GetEffectTier)]"
													}
												}
											}

											icon = {
												visible = "[Not(GreatWorkEffectSelection.IsSet)]"
												size = {30 30}
												parentanchor = vcenter|left
												texture = "gfx/interface/icons/shared_icons/ideas.dds"
											}

											icon_and_text = {
												visible = "[GreatWorkEffectSelection.IsSet]"
												parentanchor = vcenter
												position = { 26 0 }
												size = { 190 40 }
												max_width = 190
												blockoverride "Text"
												{
													text = "[GetGreatWorkEffectName(GreatWorkEffectSelection.GetEffect, GreatWorkEffectSelection.GetEffectTier)]"
												}
												blockoverride "Icon"
												{
													visible = no
												}
											}
										}
									}
								}

									#CF Can we do vertical prestige bar?
								}

								text_button_square = { #Update Button						
									parentanchor = bottom|right
									widgetanchor = bottom|right
									position = {-5 -12}
									size = { 160 28 }			
						
									visible = "[And( And(HasDlc('Heirs of Alexander'),Not(GreatWork.IsAncientWonder)), ProvinceWindow.IsPlayerProvince )]"
									
									blockoverride "Center_text" { text = "GW_EDIT_BUTTON" }
									tooltip = "GW_BUILD_BUTTON_TOOLTIP"
									blockoverride "On_click" { onclick = "[ProvinceWindow.OpenGreatWorkWindowEdit]" }
									blockoverride "ClickSound" { clicksound = "event:/SFX/UI/GreatWork/sfx_ui_great_work_open_panel" }
								}

								text_button_square = { #Remove Ancient Wonder
									parentanchor = bottom|right
									widgetanchor = bottom|right
									position = {-5 -12}
									size = { 160 28 }
									
									visible = "[And( GreatWork.IsAncientWonder, ProvinceWindow.IsPlayerProvince )]"

									blockoverride "Center_text" { text = "CANCEL_OR_DESTROY_GW_ADJECTIVE_DESTROY" }
									tooltip = "CANCEL_OR_DESTROY_GW_BUTTON_DESTROY_TOOLTIP"
									blockoverride "On_click" { onclick = "[ProvinceWindow.DestroyGreatWork]" }
									blockoverride "ClickSound" { clicksound = "event:/SFX/UI/Province/sfx_ui_province_destroy_building" }
								}
							}
							
							container = {
								parentanchor = top|right
								position = {-8 8}

								datacontext = "[ProvinceWindow.GetSelectedGreatWork]"
								visible = "[ProvinceWindow.GetProvince.HasMultipleGreatWorks]"
								icon_button_square = {  #Change GW Left
									size = { 34 34 }
									
									blockoverride "Icon" { 
										texture = "gfx/interface/buttons/arrow_left.dds"
										size = { 30 30 }
									}

									tooltip = "GW_CYCLE_BUTTON_TOOLTIP"
									blockoverride "On_click" { onclick = "[ProvinceWindow.CycleGreatWorkLeft]" }
								}
								icon_button_square = {  #Change GW Left
									size = { 34 34 }
									position = {40 0}
									blockoverride "Icon" { 
										texture = "gfx/interface/buttons/arrow_right.dds"
										size = { 30 30 }
									}

									tooltip = "GW_CYCLE_BUTTON_TOOLTIP"
									blockoverride "On_click" { onclick = "[ProvinceWindow.CycleGreatWorkRight]" }
								}
							}
						}
					}
				}
			}
		}
		icon = { 
			size = { 50 50 }
			texture = "gfx/interface/icons/shared_icons/civilization.dds"
			position = { 5 425 }
			tooltip = "[ProvinceWindow.GetProvince.GetLocalCivilizationCapTooltip]"
		}

		icon_button_province_flipped = {
			parentanchor = center|top
			position = { 329 31 }
            size = { 95 45 }
            blockoverride "Icon" { 
            	texture = "gfx/interface/icons/shared_icons/city.dds"
            	size = { 45 45 }
            }
            blockoverride "On_click"
            {
				onclick = "[GetVariableSystem.Set( 'show_province_rank', 'yes' )]"
            }
            tooltip = "#T Province Rank Info#!" 
		}
		margin_widget = {
            position = { 0 32 }
            margin_left = 6
            margin_widget = {
                scissor = yes
                resizeparent = yes
                flowcontainer = {
                    #margin_top = 2
                    margin_left = 2
                    ignoreinvisible = yes
                    alpha = 1
                    scale = 0.65
                    position = { -36 -2 }
                    spacing = -50
                    resizeparent = yes
                    icon_button_province = {
                        size = { 144 66 }
                        visible = "[ProvinceWindow.CanTransferOccupation]"
                        blockoverride "Icon" { texture = "gfx/interface/province/transfer_occupation.dds" }
                        blockoverride "On_click"
                        {
                            enabled = "[ProvinceWindow.CanTransferOccupation]"
                            onclick = "[ProvinceWindow.TransferOccupation]"
                        }
                        tooltip = "[ProvinceWindow.GetTransferOccupationTooltip]" 
                    }
                    
                    icon_button_province = {
                        size = { 144 66 }
                        name = "MigrateButton"
                        visible = "[ProvinceWindow.ShowMigrateButton]"
                        enabled = "[ProvinceWindow.CanMigrate]"
                        blockoverride "On_click" { onclick = "[ProvinceWindow.Migrate]" }
                        blockoverride "Icon" { texture = "gfx/interface/icons/shared_icons/migrate.dds" }
                        tooltip = "[ProvinceWindow.GetMigrateTooltip]"
                        layoutpolicy_horizontal = fixed
                    }
                    
                    icon_card_province = {
                        size = { 144 66 }
                        visible = "[ProvinceWindow.GetProvince.IsHolySite]"
                        layoutpolicy_horizontal = fixed
                        blockoverride "Icon" { texture = "[GetHolySiteRankIcon( ProvinceWindow.GetProvince.GetRank )]" }
                        tooltip = "[ProvinceWindow.GetHolySiteTooltip]"
                    }

                    widget = {
                    	size = { 100 66 }
                    }
                    
                    icon_card_province = {
                        size = { 144 66 }
                        visible = "[ProvinceWindow.GetProvince.IsCapital]"
                        layoutpolicy_horizontal = fixed
                        blockoverride "Icon" { texture = "gfx/interface/icons/shared_icons/country_capital.dds" }
                    }
                    
                    icon_button_province = {
                        size = { 144 66 }
                        name = "ColonizeButton"
                        visible = "[Not( ProvinceWindow.GetProvince.HasOwner )]"
                        enabled = "[ProvinceWindow.CanBeColonized]"
                        blockoverride "On_click" { onclick = "[ProvinceWindow.QuickColonize]" }
                        blockoverride "Icon" { texture = "gfx/interface/icons/shared_icons/alert_colonize_province.dds" }
                        tooltip = "[ProvinceWindow.GetColonizeTooltip]"
                        layoutpolicy_horizontal = fixed
                    }
                    
                    icon_button_province = {
                        size = { 144 66 }
                        datacontext = "[GetScriptedGui('move_capital_button')]" 
                        visible = "[And( ProvinceWindow.IsPlayerProvince, Not( ProvinceWindow.GetProvince.IsCapital ) )]"
                        enabled = "[ScriptedGui.IsValid( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).End )]"
                        blockoverride "On_click" { onclick = "[ScriptedGui.Execute( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).End )]" }
                        tooltip = "MOVE_CAPITAL_BUTTON_TOOLTIP"
                        layoutpolicy_horizontal = fixed
                        blockoverride "Icon" { texture = "gfx/interface/icons/shared_icons/country_capital.dds" }
                    }
                    
                    icon_button_province = {
                        size = { 144 66 }
                        datacontext = "[GetScriptedGui('move_province_capital_button')]" 
                        visible = "[And( ProvinceWindow.IsPlayerProvince, Not( ProvinceWindow.GetProvince.IsStateCapital ) )]"
                        enabled = "[ScriptedGui.IsValid( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).End )]"
                        blockoverride "On_click" { onclick = "[ScriptedGui.Execute( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).End )]" }
                        tooltip = "MOVE_CAPITAL_BUTTON_TOOLTIP"
                        layoutpolicy_horizontal = fixed
                        blockoverride "Icon" { texture = "gfx/interface/icons/shared_icons/state_capital.dds" }
                    }
                    
                    icon_card_province = {
                        size = { 144 66 }
                        visible = "[And(ProvinceWindow.GetProvince.IsStateCapital, Not(ProvinceWindow.GetProvince.IsCapital))]"
                        layoutpolicy_horizontal = fixed
                        blockoverride "Icon" { texture = "gfx/interface/icons/shared_icons/state_capital.dds" }
						tooltip = "[ProvinceWindow.GetProvince.GetStateCapitalTooltip]"
					}
                }
            }
        }
		base_window = {
			size = { 766 210 }
			position = { 0 0 }
			visible = "[GetVariableSystem.HasValue( 'show_province_rank', 'yes' )]"
			movable = no
			sub_header = {
				size = { 100% 32 }
				blockoverride "Title_text" { text = "Province Ranks" }
			}
			alwaystransparent = no
			flowcontainer = {
				parentanchor = top|right
				position = { -40 5 }

				button_close = {
					name = "close_button"
					onclick = "[GetVariableSystem.Set( 'show_province_rank', 'no' )]" 
					tooltip = "CLOSE"
				}
			}
			flowcontainer = {
				visible = "[EqualTo_string( ProvinceWindow.GetProvince.GetRank.GetKey, 'settlement' )]"
				parentanchor = left
				position = { 56 60 }
				textbox = {
					using = HeaderFont
					using = Black_FontColor
					parentanchor = top|left
					text = "Settlement"
					fontsize = 32
					alpha = 0.7
				}				
			}
			flowcontainer = {
				visible = "[EqualTo_string( ProvinceWindow.GetProvince.GetRank.GetKey, 'city' )]"
				parentanchor = left
				position = { 102 60 }
				textbox = {
					using = HeaderFont
					using = Black_FontColor
					parentanchor = top|left
					text = "City"
					fontsize = 32
					alpha = 0.7
				}				
			}
			flowcontainer = {
				visible = "[EqualTo_string( ProvinceWindow.GetProvince.GetRank.GetKey, 'city_metropolis' )]"
				parentanchor = left
				position = { 56 60 }
				textbox = {
					using = HeaderFont
					using = Black_FontColor
					parentanchor = top|left
					text = "Metropolis"
					fontsize = 32
					alpha = 0.7
				}				
			}
			textbox = {
				visible = "[ProvinceWindow.IsPlayerProvince]"
				parentanchor = left
				position = { 325 60 }
				using = HeaderFont
				using = Black_FontColor
				parentanchor = top|left
				text = "Upgrade"
				fontsize = 32
				alpha = 0.7
			}
			textbox = {
				visible = "[ProvinceWindow.IsPlayerProvince]"
				parentanchor = left
				position = { 547 60 }
				using = HeaderFont
				using = Black_FontColor
				parentanchor = top|left
				text = "Revoke City"
				fontsize = 32
				alpha = 0.7
			}
			using = cultural_province_ranks #Template on top of this file
			button = {
				visible = "[And(ProvinceWindow.IsPlayerProvince, EqualTo_string( ProvinceWindow.GetProvince.GetRank.GetKey, 'city' ))]"
				texture = "gfx/interface/icons/province_rank/expansion.dds"
				size = { 210 92 }
				parentanchor = left|bottom
				position = { 277 -25 }
				datacontext = "[GetScriptedGui('found_metropolis_button')]"
				alpha = 1
				enabled = "[ScriptedGui.IsValid( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
				onclick = "[ScriptedGui.Execute( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
				tooltip = "FOUND_METROPOLIS_BUTTON_TOOLTIP"
				modify_texture = {
					name = "Alpha"
					texture = "gfx/interface/base_parts/background_x60bd_alpha.dds"
					blend_mode = alphamultiply
					spriteType = Corneredtiled
					spriteborder = { 60 60 }
				}				
				using = tooltip_above
			}
			button = {
				visible = "[And(ProvinceWindow.IsPlayerProvince, EqualTo_string( ProvinceWindow.GetProvince.GetRank.GetKey, 'settlement' ))]"
				texture = "gfx/interface/icons/province_rank/founding.dds"
				size = { 210 92 }
				parentanchor = left|bottom
				position = { 277 -25 }
				datacontext = "[GetScriptedGui('found_city_button')]"
				alpha = 1
				enabled = "[ScriptedGui.IsValid( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
				onclick = "[ScriptedGui.Execute( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
				tooltip = "FOUND_CITY_BUTTON_TOOLTIP"
				modify_texture = {
					name = "Alpha"
					texture = "gfx/interface/base_parts/background_x60bd_alpha.dds"
					blend_mode = alphamultiply
					spriteType = Corneredtiled
					spriteborder = { 60 60 }
				}					
				using = tooltip_above
			}
			button = {
				visible = "[ProvinceWindow.IsPlayerProvince]"
				texture = "gfx/interface/icons/province_rank/ruins.dds"
				size = { 210 92 }
				parentanchor = left|bottom
				position = { 525 -25 }
				datacontext = "[GetScriptedGui('revoke_city_status_button')]"
				alpha = 1
				enabled = "[ScriptedGui.IsValid( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
				onclick = "[ScriptedGui.Execute( GuiScope.SetRoot( ProvinceWindow.GetProvince.MakeScope ).AddScope('player', Player.MakeScope ).End )]"
				tooltip = "REVOKE_CITY_STATUS_BUTTON_TOOLTIP"
				modify_texture = {
					name = "Alpha"
					texture = "gfx/interface/base_parts/background_x60bd_alpha.dds"
					blend_mode = alphamultiply
					spriteType = Corneredtiled
					spriteborder = { 60 60 }
				}

				using = tooltip_above
			}
		}
	}
}